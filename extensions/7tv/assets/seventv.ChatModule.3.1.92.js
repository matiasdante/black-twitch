var kt=Object.defineProperty;var $t=(a,s,l)=>s in a?kt(a,s,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[s]=l;var le=(a,s,l)=>($t(a,typeof s!="symbol"?s+"":s,l),l);import{n as Mt,k as Tt,u as X,o as ne,p as We,q as It,l as $e,h as Et,j as dt,b as rt,y as ke,z as je,A as Dt,m as Ae,d as E}from"./seventv.GearsIcon.3.1.9.js";import{c as Vt,u as me,d as Rt}from"./seventv.ReactHooks.3.1.9.js";import{g as Ut,d as Bt}from"./seventv.useModule.3.1.9.js";import{O as Nt}from"./seventv.Async.3.1.9.js";import{C as De,a as ee,M as lt,b as Pt}from"./seventv.ChatMessage.3.1.9.js";import{u as Ce,a as ut}from"./seventv.useChatEmotes.3.1.9.js";import{u as qe,a as ht}from"./seventv.UiConfirmPrompt.3.1.9.js";import{u as Le,c as Lt,d as pt,U as xt,_ as Ht,e as Ye,t as At,f as Ot}from"./seventv.UserTag.3.1.9.js";import{e as Y,x as r,l as d,_ as A,m as e,u as $,B as te,G as p,D as V,I as U,F as q,an as de,Q as fe,R as ge,q as M,t as Ve,r as N,J as mt,f as xe,ad as _e,h as Ft,a1 as _t,O as ye,N as ae,a as Q,E as we,C as ie,H as Ke,az as Oe,au as ft,n as Pe,av as Gt,Y as gt,ae as zt,w as Wt,a9 as ct,o as jt,ag as Yt,ar as Kt,M as Be,ak as Zt,W as qt}from"./seventv.index.3.1.9.js";import{a as Xt,_ as Jt}from"./seventv.ChatData.vue_vue_type_script_setup_true_lang.3.1.9.js";import{d as Qt,a as es,b as ts}from"./seventv.index.3.1.92.js";import{n as ss}from"./seventv.useCosmetics.3.1.9.js";import{b as as,d as os}from"./seventv.Transform.3.1.9.js";import{i as ns}from"./seventv.index.3.1.94.js";import{U as Ne}from"./seventv.UiScrollable.3.1.9.js";import{U as Fe}from"./seventv.UiFloating.3.1.9.js";import{v as is}from"./seventv.v4.3.1.9.js";const rs={class:"seventv-welcome-message"},ls=Y({__name:"11.Connected",props:{msgData:{}},setup(a){return(s,l)=>(r(),d("span",rs," Welcome to the chat room! "))}}),cs=A(ls,[["__scopeId","data-v-39ca32ed"]]),ds={},us={width:"20px",height:"20px",version:"1.1",viewBox:"0 0 20 20",x:"0px",y:"0px",fill:"var(--color-fill-brand)"},hs=e("g",null,[e("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M18 5v8a2 2 0 0 1-2 2H4a2.002 2.002 0 0 1-2-2V5l4 3 4-4 4 4 4-3z"})],-1),ps=[hs];function ms(a,s){return r(),d("svg",us,ps)}const vt=A(ds,[["render",ms]]),_s={},fs={width:"20px",height:"20px",version:"1.1",viewBox:"0 0 20 20",x:"0px",y:"0px",fill:"var(--color-fill-current)"},gs=e("g",null,[e("path",{d:"M8.944 2.654c.406-.872 1.706-.872 2.112 0l1.754 3.77 4.2.583c.932.13 1.318 1.209.664 1.853l-3.128 3.083.755 4.272c.163.92-.876 1.603-1.722 1.132L10 15.354l-3.579 1.993c-.846.47-1.885-.212-1.722-1.132l.755-4.272L2.326 8.86c-.654-.644-.268-1.723.664-1.853l4.2-.583 1.754-3.77z"})],-1),vs=[gs];function bs(a,s){return r(),d("svg",fs,vs)}const bt=A(_s,[["render",bs]]),yt=a=>(fe("data-v-58893c52"),a=a(),ge(),a),ys={class:"seventv-sub-message-container seventv-highlight"},ws={class:"sub-part"},Cs={class:"sub-message-icon"},Ss={class:"sub-message-text"},ks={key:0,class:"sub-name bold"},$s=yt(()=>e("span",{class:"bold"},"Subscribed",-1)),Ms=yt(()=>e("span",null,".",-1)),Ts=Y({__name:"14.SubscriptionMessage",props:{msg:{},msgData:{}},setup(a){var g,f;const s=a,l=((g=s.msgData.methods)==null?void 0:g.plan)=="Prime"?"Prime":"Tier "+((f=s.msgData.methods)==null?void 0:f.plan.charAt(0));return(m,h)=>(r(),d("span",ys,[e("div",ws,[e("div",Cs,[$(l)=="Prime"?(r(),te(vt,{key:0})):(r(),te(bt,{key:1}))]),e("div",Ss,[m.msg.author?(r(),d("span",ks,p(m.msg.author.displayName),1)):V("",!0),$s,U(" with "+p($(l))+" ",1),m.msgData.sourceData?(r(),d(q,{key:1},[U(" to "+p(m.msgData.sourceData.displayName),1)],64)):V("",!0),Ms])]),m.msg.body?de(m.$slots,"default",{key:0},void 0,!0):V("",!0)]))}}),Is=A(Ts,[["__scopeId","data-v-58893c52"]]),wt=a=>(fe("data-v-98f5cc74"),a=a(),ge(),a),Es={class:"seventv-sub-message-container seventv-highlight"},Ds={class:"sub-part"},Vs={class:"sub-message-icon"},Rs={class:"sub-message-text"},Us={key:0,class:"sub-name bold"},Bs=wt(()=>e("span",{class:"bold"},"Subscribed",-1)),Ns=wt(()=>e("span",null,". They've subscribed for ",-1)),Ps={class:"bold"},Ls={key:0,class:"message-part"},xs=Y({__name:"15.Resubscription",props:{msgData:{}},setup(a){var g,f;const s=a,l=((g=s.msgData.methods)==null?void 0:g.plan)=="Prime"?"Prime":"Tier "+((f=s.msgData.methods)==null?void 0:f.plan.charAt(0));return(m,h)=>{var C;return r(),d("span",Es,[e("div",Ds,[e("div",Vs,[((C=m.msgData.methods)==null?void 0:C.plan)=="Prime"?(r(),te(vt,{key:0})):(r(),te(bt,{key:1}))]),e("div",Rs,[m.msgData.user?(r(),d("span",Us,p(m.msgData.user.displayName),1)):V("",!0),Bs,U(" with "+p($(l))+" ",1),m.msgData.sourceData?(r(),d(q,{key:1},[U(" to "+p(m.msgData.sourceData.displayName),1)],64)):V("",!0),Ns,e("span",Ps,p(m.msgData.cumulativeMonths)+" months",1),m.msgData.shouldShareStreakTenure?(r(),d(q,{key:2},[U(" , "+p(m.msgData.streakMonths)+" month"+p((m.msgData.streakMonths??0)>1?"s":"")+" in a row. ",1)],64)):(r(),d(q,{key:3},[U("! ")],64))])]),m.msgData.message?(r(),d("div",Ls,[de(m.$slots,"default",{},void 0,!0)])):V("",!0)])}}}),Hs=A(xs,[["__scopeId","data-v-98f5cc74"]]),As={},Os={width:"25px",height:"20px",version:"1.1",viewBox:"0 0 20 20",x:"0px",y:"0px",fill:"var(--color-fill-current)"},Fs=e("g",null,[e("path",{"fill-rule":"evenodd",d:"M16 6h2v6h-1v6H3v-6H2V6h2V4.793c0-2.507 3.03-3.762 4.803-1.99.131.131.249.275.352.429L10 4.5l.845-1.268a2.81 2.81 0 01.352-.429C12.969 1.031 16 2.286 16 4.793V6zM6 4.793V6h2.596L7.49 4.341A.814.814 0 006 4.793zm8 0V6h-2.596l1.106-1.659a.814.814 0 011.49.451zM16 8v2h-5V8h5zm-1 8v-4h-4v4h4zM9 8v2H4V8h5zm0 4H5v4h4v-4z","clip-rule":"evenodd"})],-1),Gs=[Fs];function zs(a,s){return r(),d("svg",Os,Gs)}const Ws=A(As,[["render",zs]]),js={class:"seventv-sub-message-container seventv-highlight"},Ys={class:"sub-part"},Ks={class:"gift-icon"},Zs={class:"sub-message-text"},qs={class:"sub-name bold"},Xs={class:"bold"},Js={class:"bold"},Qs=Y({__name:"21.SubGift",props:{msgData:{}},setup(a){return(s,l)=>{var g;return r(),d("span",js,[e("div",Ys,[e("div",Ks,[M(Ws)]),e("div",Zs,[e("span",qs,p(s.msgData.user.displayName),1),U(" Gifted a "),e("span",Xs," Tier "+p((g=s.msgData.methods)==null?void 0:g.plan.charAt(0)),1),U(" Sub to "),e("span",Js,p(s.msgData.recipientDisplayName),1),s.msgData.sourceData?(r(),d(q,{key:0},[U(" in "+p(s.msgData.sourceData.displayName)+"'s channel! ",1)],64)):V("",!0)])])])}}}),ea=A(Qs,[["__scopeId","data-v-1ca08a38"]]),ta=a=>(fe("data-v-530274b2"),a=a(),ge(),a),sa={class:"seventv-raid-message-container seventv-highlight"},aa={class:"bold"},oa={class:"bold"},na=ta(()=>e("span",null,".",-1)),ia=Y({__name:"26.Raid",props:{msgData:{}},setup(a){return(s,l)=>(r(),d("span",sa,[e("span",aa,p(s.msgData.params.displayName),1),U(" raided "),s.msgData.sourceData?(r(),d(q,{key:0},[U(p(s.msgData.sourceData.displayName)+"'s channel ",1)],64)):V("",!0),U(" with a viewer count of "),e("span",oa,p(s.msgData.params.viewerCount),1),na]))}}),ra=A(ia,[["__scopeId","data-v-530274b2"]]),la={},ca={alt:"mystery gift",class:"mystery-gift-theme__image",src:"https://static-cdn.jtvnw.net/subs-image-assets/gift-illus.png"};function da(a,s){return r(),d("img",ca)}const ua=A(la,[["render",da]]),ha=a=>(fe("data-v-83ef3b9f"),a=a(),ge(),a),pa={class:"seventv-sub-message-container seventv-highlight"},ma={class:"sub-part"},_a={class:"gift-icon"},fa={class:"sub-message-text"},ga={class:"sub-name-big"},va={key:0},ba=ha(()=>e("span",null,".",-1)),ya=Y({__name:"35.SubMysteryGift",props:{msgData:{}},setup(a){return(s,l)=>(r(),d("span",pa,[e("div",ma,[e("div",_a,[M(ua)]),e("div",fa,[e("span",ga,p(s.msgData.user.displayName),1),U(" is gifting "+p(s.msgData.massGiftCount)+" Tier "+p(s.msgData.plan.charAt(0))+" Sub"+p(s.msgData.massGiftCount>1?"s":"")+" ",1),s.msgData.sourceData?(r(),d("span",va,"to "+p(s.msgData.sourceData.displayName)+"'s community",1)):V("",!0),ba,s.msgData.senderCount==s.msgData.massGiftCount?(r(),d(q,{key:1},[U(" It's their first Gift Sub in the channel! ")],64)):(r(),d(q,{key:2},[U(" They've gifted a total of "+p(s.msgData.senderCount)+" Subs in the channel! ",1)],64))])])]))}}),wa=A(ya,[["__scopeId","data-v-83ef3b9f"]]),Ca={},Sa={width:"20px",height:"20px",version:"1.1",viewBox:"0 0 20 20",x:"0px",y:"0px",fill:"var(--color-fill-current)"},ka=e("g",null,[e("path",{"fill-rule":"evenodd",d:"M3 12l7-10 7 10-7 6-7-6zm2.678-.338L10 5.487l4.322 6.173-.85.728L10 11l-3.473 1.39-.849-.729z","clip-rule":"evenodd"})],-1),$a=[ka];function Ma(a,s){return r(),d("svg",Sa,$a)}const Ta=A(Ca,[["render",Ma]]),Ia=a=>(fe("data-v-fba6705a"),a=a(),ge(),a),Ea={class:"seventv-bits-badge-message-container seventv-highlight"},Da={class:"bits-badge-header"},Va={class:"bits-icon"},Ra={class:"bits-text"},Ua={class:"bits-username bold"},Ba={class:"bold"},Na={key:0},Pa=Ia(()=>e("span",null,"!",-1)),La={key:0,class:"bits-badge-message"},xa=Y({__name:"41.BitsBadgeTier",props:{msg:{},msgData:{}},setup(a){return(s,l)=>(r(),d("span",Ea,[e("div",Da,[e("div",Va,[M(Ta)]),e("div",Ra,[e("span",Ua,p(s.msgData.user.displayName),1),U(" just earned a new "),e("span",Ba,p(s.msgData.threshold)+" Bits badge",1),s.msgData.sourceData?(r(),d("span",Na," in "+p(s.msgData.sourceData.displayName)+"'s channel",1)):V("",!0),Pa])]),s.msg.body?(r(),d("div",La,[de(s.$slots,"default",{},void 0,!0)])):V("",!0)]))}}),Ha=A(xa,[["__scopeId","data-v-fba6705a"]]),Aa={},Oa={type:"color-fill-current",width:"1em",height:"1em",version:"1.1",viewBox:"0 0 20 20",fill:"currentColor"},Fa=e("g",null,[e("path",{d:"M10 6a4 4 0 014 4h-2a2 2 0 00-2-2V6z"}),e("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-2 0a6 6 0 11-12 0 6 6 0 0112 0z","clip-rule":"evenodd"})],-1),Ga=[Fa];function za(a,s){return r(),d("svg",Oa,Ga)}const Ct=A(Aa,[["render",za]]),Wa={class:"seventv-reward-message-container seventv-highlight"},ja={key:0,class:"reward-part"},Ya={class:"reward-left"},Ka={class:"reward-username bold"},Za={class:"reward-name bold"},qa={class:"reward-cost bold"},Xa=["highlight"],Ja=Y({__name:"43.PointsReward",props:{msg:{},msgData:{}},setup(a){return(s,l)=>(r(),d("span",Wa,[s.msgData.reward?(r(),d("div",ja,[e("div",Ya,[e("span",Ka,p(s.msgData.displayName),1),U(" redeemed "),e("span",Za,p(s.msgData.reward.name),1),s.msgData.sourceData?(r(),d(q,{key:0},[U(" in "+p(s.msgData.sourceData.displayName)+"'s channel ",1)],64)):V("",!0)]),e("span",qa,[M(Ct),e("span",null,p(s.msgData.reward.cost),1)])])):V("",!0),s.msgData.message?(r(),d("div",{key:1,class:"message-part",highlight:s.msgData.reward.isHighlighted},[de(s.$slots,"default",{},void 0,!0)],8,Xa)):V("",!0)]))}}),Qa=A(Ja,[["__scopeId","data-v-4b411dab"]]),eo={},to={width:"20px",height:"20px",version:"1.1",viewBox:"0 0 20 20",x:"0px",y:"0px",fill:"var(--color-fill-current)"},so=e("g",null,[e("path",{"fill-rule":"evenodd",d:"M18 2v5.646a3 3 0 0 1-1.886 2.785L13 11.677V18h-2v-5.557L5.649 14.45a1 1 0 0 0-.649.936V18H3v-2.614a3 3 0 0 1 1.947-2.809L7 11.807V9.874A4.002 4.002 0 0 1 8 2a4 4 0 0 1 1 7.874v1.183l2.639-.99 3.732-1.493A1 1 0 0 0 16 7.646V2h2ZM8 8a2 2 0 1 1 0-4 2 2 0 0 1 0 4Z","clip-rule":"evenodd"})],-1),ao=[so];function oo(a,s){return r(),d("svg",to,ao)}const no=A(eo,[["render",oo]]),io={class:"seventv-introduction-message-container seventv-highlight"},ro={class:"introduction-header"},lo={class:"introduction-icon"},co={class:"introduction-message"},uo=Y({__name:"47.CommunityIntroduction",props:{msgData:{}},setup(a){return(s,l)=>(r(),d("span",io,[e("div",ro,[e("div",lo,[M(no)]),U(" New Introduction ")]),e("div",co,[de(s.$slots,"default",{},void 0,!0)])]))}}),ho=A(uo,[["__scopeId","data-v-375277fd"]]),po={},mo={fill:"var(--color-fill-current)",width:"18px",height:"20px",version:"1.1",viewBox:"0 0 20 20",x:"0px",y:"0px"},_o=e("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M11 14l7 4V2l-7 4H4a2 2 0 00-2 2v4a2 2 0 002 2h2v4h2v-4h3zm1-6.268l4-2.286v9.108l-4-2.286V7.732zM10 12H4V8h6v4z"},null,-1),fo=[_o];function go(a,s){return r(),d("svg",mo,fo)}const vo=A(po,[["render",go]]),bo={class:"announce-header"},yo={class:"announce-icon"},wo={class:"announce-title"},Co={class:"announce-message"},So=Y({__name:"49.AnnouncementMessage",props:{msgData:{}},setup(a){const s=a,l=Ce(),g=Le(l),f="announcement-line--"+(s.msgData.color=="PRIMARY"&&g.primaryColorHex==null?"purple":s.msgData.color.toLowerCase());return(m,h)=>(r(),d("span",{class:Ve(["seventv-announce-message-container",f])},[e("div",bo,[e("div",yo,[M(vo)]),e("div",wo,[m.msgData.sourceData?(r(),d(q,{key:0},[U(p(m.msgData.sourceData.displayName)+"'s ",1)],64)):V("",!0),U(" Announcement ")])]),e("div",Co,[de(m.$slots,"default",{},void 0,!0)])]))}}),ko=A(So,[["__scopeId","data-v-5566bd79"]]),$o={},Mo={width:"20px",height:"20px",version:"1.1",viewBox:"0 0 20 20",x:"0px",y:"0px",fill:"var(--color-fill-current)"},To=e("g",null,[e("path",{"fill-rule":"evenodd",d:"M11 4.5 9 2 4.8 6.9A7.48 7.48 0 0 0 3 11.77C3 15.2 5.8 18 9.23 18h1.65A6.12 6.12 0 0 0 17 11.88c0-1.86-.65-3.66-1.84-5.1L12 3l-1 1.5ZM6.32 8.2 9 5l2 2.5L12 6l1.62 2.07A5.96 5.96 0 0 1 15 11.88c0 2.08-1.55 3.8-3.56 4.08.36-.47.56-1.05.56-1.66 0-.52-.18-1.02-.5-1.43L10 11l-1.5 1.87c-.32.4-.5.91-.5 1.43 0 .6.2 1.18.54 1.64A4.23 4.23 0 0 1 5 11.77c0-1.31.47-2.58 1.32-3.57Z","clip-rule":"evenodd"})],-1),Io=[To];function Eo(a,s){return r(),d("svg",Mo,Io)}const Do=A($o,[["render",Eo]]),St=a=>(fe("data-v-6df0a6ee"),a=a(),ge(),a),Vo={class:"seventv-viewer-milestone-container seventv-highlight"},Ro={class:"milestone-part"},Uo={class:"milestone-icon"},Bo={class:"milestone-text"},No={class:"milestone-header"},Po={key:0,class:"viewer-name bold"},Lo={class:"milestone-points"},xo=St(()=>e("span",{class:"bold"},"Watch Streak Reached!: ",-1)),Ho={key:0},Ao={key:1},Oo=St(()=>e("span",null,"!",-1)),Fo={key:0,class:"message-part"},Go=Y({__name:"52.ViewerMilestone",props:{msg:{},msgData:{}},setup(a){return(s,l)=>(r(),d("span",Vo,[e("div",Ro,[e("div",Uo,[M(Do)]),e("div",Bo,[e("div",No,[s.msg.author?(r(),d("span",Po,p(s.msg.author.displayName),1)):V("",!0),e("span",Lo,[U(" + "),M(Ct),U(" "+p(s.msgData.copoReward),1)])]),xo,s.msg.author?(r(),d("span",Ho,p(s.msg.author.displayName),1)):V("",!0),U(" is currently on a "+p(s.msgData.watchStreak)+"-stream streak ",1),s.msgData.sourceData?(r(),d("span",Ao,"in "+p(s.msgData.sourceData.displayName)+"'s channel",1)):V("",!0),Oo])]),s.msg.body?(r(),d("div",Fo,[de(s.$slots,"default",{},void 0,!0)])):V("",!0)]))}}),zo=A(Go,[["__scopeId","data-v-6df0a6ee"]]);function Wo(a){const s=a;return Array.isArray(s.messageParts)&&typeof s.messageType=="number"}function jo(a){const s=a;return Array.isArray(s.messageParts)||typeof s.message=="object"}function Yo(a){return typeof a.moderationType=="number"}const Ko=["id"],Zo=Y({__name:"ChatMessageUnhandled",props:{msg:{}},setup(a){const s=a,l=N(null);return mt(()=>{!l.value||!s.msg.wrappedNode||l.value.appendChild(s.msg.wrappedNode)}),(g,f)=>(r(),d("span",{id:g.msg.id,ref_key:"msgContainer",ref:l,class:"seventv-unhandled-message-ref"},null,8,Ko))}}),Ee=300,qo=40,Ge=80,Xo=1209600;function Jo(a){return a<60?`${Math.round(a)} seconds`:a<60*60?`${Math.round(a/60)} minutes`:a<60*60*24?`${Math.round(a/(60*60))} hours`:`${Math.round(a/(60*60*24))} days`}class Qo{constructor(s=!1){le(this,"command","");le(this,"banDuration",null);le(this,"text","");le(this,"time",0);le(this,"banVis",0);le(this,"unbanVis",0);le(this,"color","");le(this,"pos","0px");this.isActor=s}secondsToBanDuration(s){const l=ns({start:0,end:s*1e3});return"".concat(l.seconds?`${l.seconds}s`:"",l.days?`${l.days}d`:"",l.hours?`${l.hours}h`:"",l.minutes?`${l.minutes}m`:"")}calculate(s){if(this.pos=`${this.isActor?Math.max(0,s):s}px`,s<-40&&!this.isActor)this.command="unban",this.unbanVis=1;else if(s<qo){this.command="",this.text="",this.color="";return}else if(s<Ge)this.command="delete",this.text="Delete",this.color="#FFFF00",this.banVis=1;else if(s<Ee&&!this.isActor){const l=Math.pow((s+.25*Ee-Ge)/(1.25*Ee-Ge),10)*Xo;this.command="ban",this.banDuration=this.secondsToBanDuration(Math.round(l))||"14d",this.text=String(Jo(l)),this.color="#FFA500",this.banVis=1}else s>=Ee&&!this.isActor&&(this.command="ban",this.banDuration=null,this.text="Ban",this.color="#C40000",this.banVis=1)}}const en=a=>(fe("data-v-5103e512"),a=a(),ge(),a),tn={class:"grabbable-wrapper"},sn=en(()=>e("div",{class:"dots"},null,-1)),an=[sn],on={class:"wrapped"},nn=Y({__name:"ModSlider",props:{msg:{}},setup(a){var I,u,R;const s=a,l=Ce(),g=Lt(l,((I=s.msg.author)==null?void 0:I.username)??""),f=N(!1),m=N(!1),h=xe(new Qo(((u=s.msg.author)==null?void 0:u.isActor)??!1)),C=_e(h,"pos");let L=0;const K=((R=s.msg.highlight)==null?void 0:R.color)??"none",F=Ft(()=>{const k=l.actor.roles,x=s.msg.badges;return!(!k.has("MODERATOR")&&!k.has("BROADCASTER")||x.broadcaster||x.moderator)}),se=k=>{k.stopPropagation(),L=k.pageX,m.value=!0,k.target.setPointerCapture(k.pointerId)},w=k=>{var x;if(m.value=!1,h.command&&s.msg.author)switch(h.command){case"ban":g.banUserFromChat(((x=h.banDuration)==null?void 0:x.toString())??null);break;case"unban":g.unbanUserFromChat();break;case"delete":g.deleteChatMessage(s.msg.id);break}f.value=!0,setTimeout(()=>f.value=!1,300),h.calculate(0),k.target.releasePointerCapture(k.pointerId)},v=k=>{if(!m.value)return;k.preventDefault();const x=Math.max(Math.min(k.pageX-L,Ee),-60);h.calculate(x)};return(k,x)=>{const W=_t("tooltip");return F.value?(r(),d("div",{key:0,class:"seventv-ban-slider",style:ye({transform:"translateX("+C.value+")",transition:f.value?"transform 0.3s ease":"none",boxShadow:m.value?"black 0px 0.1rem 0.2rem":"none"})},[e("div",{class:"ban-background",style:ye({backgroundColor:h.color,width:C.value})},[e("span",{class:"text",style:ye({opacity:h.banVis})},p(h.text),5)],4),ae((r(),d("div",tn,[e("div",{class:"grabbable-outer",onPointerdown:se,onPointerup:w,onPointermove:v},[e("div",{class:"grabbable-inner",style:ye({backgroundColor:$(K)})},an,4)],32)])),[[W,"Drag to moderate","left"]]),e("div",on,[de(k.$slots,"default",{},void 0,!0)]),e("div",{class:"unban-background",style:ye({width:"calc(-1 *"+C.value+")"})},[e("span",{class:"text",style:ye({opacity:h.unbanVis})}," Unban ",4)],4)],4)):de(k.$slots,"default",{key:1},void 0,!0)}}}),rn=A(nn,[["__scopeId","data-v-5103e512"]]),ln=["msg-id"],cn=Y({__name:"ChatList",props:{list:{},restrictions:{},messageHandler:{},sharedChatData:{}},setup(a,{expose:s}){const l=a,g=Ce(),{identity:f}=Mt(Tt()),m=ut(g),h=qe(g),C=_e(h,"displayed"),L=ht(g),K=Le(g),F=pt(g),se=Qt(),w=_e(K,"hovering"),v=N(!1),I=X("chat.hide_shared_chat"),u=X("chat.mod_slider"),R=X("chat.mod_messages"),k=X("highlights.basic.mention"),x=X("highlights.basic.first_time_chatter"),W=X("highlights.basic.self"),O=X("highlights.basic.mention_sound"),ue=X("highlights.basic.mention_title_flash"),ve=X("highlights.basic.restricted_low_trust_user"),he=X("highlights.basic.monitored_low_trust_user"),be=_e(l,"messageHandler"),b=_e(l,"list"),D=_e(l,"sharedChatData"),B=_e(l,"restrictions"),t=N(),oe=Object.assign({"/src/app/chat/msg/0.NormalMessage.vue":Ht,"/src/app/chat/msg/11.Connected.vue":cs,"/src/app/chat/msg/14.SubscriptionMessage.vue":Is,"/src/app/chat/msg/15.Resubscription.vue":Hs,"/src/app/chat/msg/21.SubGift.vue":ea,"/src/app/chat/msg/26.Raid.vue":ra,"/src/app/chat/msg/35.SubMysteryGift.vue":wa,"/src/app/chat/msg/41.BitsBadgeTier.vue":Ha,"/src/app/chat/msg/43.PointsReward.vue":Qa,"/src/app/chat/msg/47.CommunityIntroduction.vue":ho,"/src/app/chat/msg/49.AnnouncementMessage.vue":ko,"/src/app/chat/msg/52.ViewerMilestone.vue":zo,"/src/app/chat/msg/BasicSystemMessage.vue":Ye,"/src/app/chat/msg/EmoteSetUpdateMessage.vue":Xt}),P={},J=/src\/app\/chat\/msg\/(\d+)\.(\w+)\.vue$/;for(const[o,n]of Object.entries(oe)){const[,y]=o.match(J)??[];if(!y)continue;const G=parseInt(y);Number.isNaN(G)||(P[G]=n)}function i(o){return P[o]??null}const Re=o=>{const n=new De(o.id);switch(n.channelID=g.id,h.handlers.forEach(y=>y(o)),o.type){case ee.MESSAGE:case ee.SUBSCRIPTION:case ee.RESUBSCRIPTION:case ee.SUB_GIFT:case ee.RAID:case ee.SUB_MYSTERY_GIFT:case ee.ANNOUNCEMENT_MESSAGE:case ee.RESTRICTED_LOW_TRUST_USER_MESSAGE:case ee.BITS_BADGE_TIER_MESSAGE:case ee.COMMUNITY_INTRODUCTION:case ee.VIEWER_MILESTONE:case ee.CONNECTED:Se(n,o);break;case ee.CHANNEL_POINTS_REWARD:if(!o.animationID)Se(n,o);else return!1;break;case ee.MODERATION:if(!Yo(o))break;He(o);break;case ee.MESSAGE_ID_UPDATE:Ue(o);break;default:return!1}return!0};function Se(o,n,y=!0){var j,pe,Xe,Je,Qe,et,tt,st,at,ot;const G=i(n.type);G&&o.setComponent(G,{msgData:n}),o.instance||o.setComponent(P[0],{msgData:n}),n.type===ee.RESTRICTED_LOW_TRUST_USER_MESSAGE&&ve.value&&o.setHighlight("#ff7d00","Restricted Suspicious User");let z=n.sourceRoomID??((j=n.sharedChat)==null?void 0:j.sourceRoomID)??((pe=n.message)==null?void 0:pe.sourceRoomID)??null;if(!z&&n.nonce&&(z=o.channelID),I.value&&o.channelID!=z)return;z&&!I.value&&(n.sourceData=(Xe=D.value)==null?void 0:Xe.get(z),o.setSourceData(n.sourceData));const T=n.user??((Je=n.message)==null?void 0:Je.user)??null;if(T){const Z=h.chatters[T.userID],H=T.color?K.useHighContrastColors?ss(T.color,K.isDarkTheme):T.color:null;if(Z&&(Z.username=T.userLogin,Z.displayName=T.userDisplayName??T.displayName??T.userLogin,Z.color=H??Z.color,Z.intl=T.isIntl),o.setAuthor(Z??{id:T.userID,username:T.userLogin??((Qe=T.userDisplayName??T.displayName)==null?void 0:Qe.toLowerCase()),displayName:T.userDisplayName??T.displayName??T.userLogin,intl:T.isIntl,color:H}),o.author&&K.blockedUsers.has(o.author.id)){if(!g.actor.roles.has("MODERATOR")){$e.debug("Ignored message from blocked user",o.author.id);return}o.setHighlight("#9488855A","You Blocked This User")}f.value&&o.author&&o.author.id===f.value.id&&(o.author.isActor=!0),o.badges=n.badges??((et=n.message)==null?void 0:et.badges)??{}}if(jo(n)){if(o.body=(n.messageBody??((tt=n.message)==null?void 0:tt.messageBody)??"").replace(`
`," "),o.first=n.isFirstMsg,typeof n.nonce=="string"&&o.setNonce(n.nonce),n.isFirstMsg&&x.value&&o.setHighlight("#c832c8","First Message"),o.author){const Z=h.lowTrustUsers[o.author.id];Z&&Z.treatment.type==="ACTIVE_MONITORING"&&he.value&&o.setHighlight("#ff7d00","Monitored Suspicious User")}if(n.reply){const Z=n.reply.parentUserLogin&&n.reply.parentDisplayName?{username:n.reply.parentUserLogin,displayName:n.reply.parentDisplayName}:null,H=n.reply&&n.reply.threadParentMsgId&&n.reply.threadParentUserLogin?{deleted:n.reply.threadParentDeleted,id:n.reply.threadParentMsgId,login:n.reply.threadParentUserLogin}:null;o.parent={id:n.reply.parentMsgId??"",uid:n.reply.parentUid??"",deleted:n.reply.parentDeleted??!1,body:n.reply.parentMessageBody??"",author:Z,thread:H},F.checkMatch("~reply",o)}n.messageType===1&&(o.slashMe=!0);for(const Z of n.messageParts??((st=n.message)==null?void 0:st.messageParts)??[])switch(Z.type){case lt.EMOTE:{const H=Z.content;if(!H.alt||(at=H.emoteID)!=null&&at.startsWith("__FFZ__")||(ot=H.emoteID)!=null&&ot.startsWith("__BTTV__"))continue;const nt={id:H.emoteID??"",name:H.alt,flags:0,provider:"PLATFORM",isTwitchCheer:{amount:H.cheerAmount,color:H.cheerColor},data:H.cheerAmount?as({alt:H.alt,cheerAmount:H.cheerAmount,cheerColor:H.cheerColor,images:H.images}):os({id:H.emoteID,token:H.alt})},it=H.alt+(H.cheerAmount??"");o.nativeEmotes[it]=nt,H.cheerAmount&&(o.nativeEmotes[it.toLowerCase()]=nt);break}case lt.FLAGGEDSEGMENT:{const H=Z;if(!H.originalText)continue;o.body=o.body.replace(H.originalText,"*".repeat(H.originalText.length));break}}}if(n.nonce){o.setDeliveryState("IN_FLIGHT");const{stop:Z}=Et(()=>{o.setDeliveryState("BOUNCED")},1e4);dt(N(o.deliveryState)).toBe("SENT").then(Z)}Wo(n)?o.setTimestamp(n.timestamp):n.message&&o.setTimestamp(n.message.timestamp??0);for(const Z in F.getAll())F.checkMatch(Z,o);g.actor.roles.has("MODERATOR")&&(o.pinnable=!0,o.deletable=!0),y&&h.add(o)}function He(o){if(o.moderationType===Pt.DELETE){const n=h.find(y=>y.id==o.targetMessageID);n&&(n.moderation.deleted=!0)}else{const n=h.moderated[0];if(n&&n.victim&&n.victim.username===o.userLogin&&n.mod.banDuration===o.duration)return;const y=h.messagesByUser(o.userLogin),G={actionType:o.duration>0?"TIMEOUT":"BAN",banDuration:o.duration,banReason:o.reason,actor:null,banned:!0,deleted:!1,timestamp:Date.now()};let z=null;for(const T of y)T.moderation=G,z||(z=T.author);if(h.moderated.unshift({id:Symbol("seventv-moderation-message"),messages:y.reverse().slice(0,10),mod:G,victim:z||{id:o.userLogin,username:o.userLogin,displayName:o.userLogin,color:""}}),h.moderated.length>125&&Pe(()=>{for(;h.moderated.length>100;)h.moderated.pop()}),R.value&&!g.actor.roles.has("MODERATOR")){const T=new De().setComponent(Ye,{text:o.userLogin+(o.duration>0?` was timed out (${o.duration}s)`:" was permanently banned")});h.add(T)}}}function Ue(o){const n=h.find(y=>y.nonce==o.nonce);n&&(n.setID(o.id),n.setDeliveryState("SENT"))}Q(be,(o,n)=>{var y,G;o!==n&&n?((y=B.value)!=null&&y.component.onChatEvent&&h.handlers.delete(B.value.component.onChatEvent),ne(n,"handleMessage")):o&&((G=B.value)!=null&&G.component.onChatEvent&&h.handlers.add(B.value.component.onChatEvent),We(o,"handleMessage",function(z,T){return Re(T)?"":(Me.set(T.id,T),z==null?void 0:z.call(this,T))}))},{immediate:!0});const Me=xe(new Map),c=new Map;It(b.value.domNodes,o=>{const n=new Set(c.keys());for(const[y,G]of Object.entries(o)){if(y==="root"||(n.delete(y),c.has(y)||!Me.has(y)))continue;const z=new De(y+"-unhandled");z.wrappedNode=G,h.add(z),c.set(y,G)}for(const y of n)c.delete(y)},{debounce:100,immediate:!0});const _=es("Alt");let S=!1;return Q([_,w],([o,n])=>{L.paused?S&&(L.unpause(),S=!1):(n&&K.pauseReason.has("MOUSEOVER")||n&&o&&K.pauseReason.has("ALTKEY"))&&(L.pause(),S=!0)}),Q([f,W],([o,n])=>{n&&o?F.define("~self",{test:y=>!!(y.author&&o)&&y.author.id===o.id,label:"You",color:"#3ad3e0"}):F.remove("~self")},{immediate:!0}),Q(se,o=>{o==="hidden"&&!L.paused?(L.pause(),v.value=!0):v.value&&(L.unpause(),v.value=!1)}),Q([f,k,O,ue],([o,n,y,G])=>{const z=o?`\\b${o.username}\\b`:null;if(!z)return;const T=new RegExp(z,"i");n?(F.define("~mention",{test:j=>!!(o&&j.author&&j.author.username!==o.username&&T.test(j.body)),label:"Mentions You",color:"#e13232",soundPath:y?"#ping":void 0,flashTitleFn:G?j=>{var pe;return`ðŸ”” @${((pe=j.author)==null?void 0:pe.username)??"A user"} mentioned you`}:void 0,flashTitle:!0,phrase:!0}),F.define("~reply",{test:j=>!!(j.parent&&j.parent.author&&j.author&&j.author.username!==j.parent.author.username&&T.test(j.parent.author.username)),label:"Replying to You",color:"#e13232",soundPath:y?"#ping":void 0,flashTitleFn:G?j=>{var pe;return`ðŸ”” @${((pe=j.author)==null?void 0:pe.username)??"A user"} replied to you`}:void 0,flashTitle:!0,phrase:!0})):(F.remove("~mention"),F.remove("~reply"))},{immediate:!0}),s({onMessage:Re,onChatMessage:Se}),(o,n)=>(r(),d("main",{ref_key:"chatListEl",ref:t,class:"seventv-chat-list"},[(r(!0),d(q,null,we(C.value,y=>(r(),d("div",{key:y.sym,"msg-id":y.id,class:"seventv-message"},[y.instance?(r(),te(Ke($(u)&&$(g).actor.roles.has("MODERATOR")&&y.author?rn:"span"),ft(Oe({key:0},{msg:y})),{default:ie(()=>[(r(),te(Ke(y.instance),Oe(y.componentProps,{msg:y}),{default:ie(G=>[M(xt,Oe(G,{msg:y,emotes:$(m).active,chatters:$(h).chattersByUsername}),null,16,["msg","emotes","chatters"])]),_:2},1040,["msg"]))]),_:2},1040)):(r(),te(Zo,{key:1,msg:y},null,8,["msg"]))],8,ln))),128))],512))}}),dn=A(cn,[["__scopeId","data-v-87c844dc"]]),un={},hn={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 320 512",fill:"currentColor",width:"1em",height:"1em"},pn=e("path",{d:"M128 64H0V448H128V64zm192 0H192V448H320V64z"},null,-1),mn=[pn];function _n(a,s){return r(),d("svg",hn,mn)}const fn=A(un,[["render",_n]]),Ze=N(window.__twitch_pubsub_events);Object.defineProperty(window,"__twitch_pubsub_events",{set(a){Ze.value=a},get(){return Ze.value}});function Te(a,s){ts(Ze,"notification",async l=>{let g;try{g=JSON.parse(l.detail)}catch(f){$e.error("Failed to parse pubsub message",f.message);return}g.type===a&&s(g.data)})}const gn=Y({__name:"ChatPubSub",setup(a){const s=Ce(),l=qe(s),g=X("highlights.basic.monitored_low_trust_user"),f=X("highlights.basic.returning_chatter"),m=X("highlights.basic.raider"),h={returning_chatter:0,raider:1};Te("low_trust_user_new_message",C),Te("low_trust_user_treatment_update",L),Te("moderation_action",K),Te("chat_rich_embed",F),Te("chat-highlight",se);async function C(w){const v=w.low_trust_user;if(!v||(l.lowTrustUsers[v.id]={id:v.low_trust_id,types:v.types,banEvasion:{likelihood:v.ban_evasion_evaluation,evaluatedAt:v.evaluated_at},sharedBanChannels:v.shared_ban_channel_ids,treatment:{type:v.treatment,updatedAt:v.updated_at,updatedBy:v.updated_by.login},channelSharedBansUpdatedAt:null},!g.value))return;const I=await l.awaitMessage(w.message_id).catch(u=>{$e.debug("failed to find new message for low trust user",u.message)});I&&I.setHighlight("#ff7d00","Monitored Suspicious User")}async function L(w){const v=l.lowTrustUsers[w.target_user_id];l.lowTrustUsers[w.target_user_id]={id:w.low_trust_id,types:w.types,banEvasion:{evaluatedAt:w.evaluated_at,likelihood:w.ban_evasion_evaluation},sharedBanChannels:(v==null?void 0:v.sharedBanChannels)??[],treatment:{type:w.treatment==="NO_TREATMENT"?"NONE":w.treatment,updatedAt:w.updated_at,updatedBy:w.updated_by.login},channelSharedBansUpdatedAt:null}}async function K(w){const v=w.moderation_action;if(v)switch(v){case"ban":case"timeout":{const I=l.messagesByUser(w.target_user_login);if(!I)return;const u=w.args[1]||null,R=w.args[2]??"";for(const k of I)k.moderation.banReason=R,k.moderation.actor=w.created_by_user_id?{id:w.created_by_user_id,username:w.created_by??"",displayName:w.created_by??"",color:""}:null,k.moderation.banDuration=u?parseInt(u):null,k.moderation.banned=!0;break}}}async function F(w){if(!w.twitch_metadata)return;const I=await l.awaitMessage(w.message_id).catch(O=>{$e.debug("failed to find new message for chat rich embed",O.message)});if(!I)return;const{title:u,author_name:R,request_url:k,thumbnail_url:x,twitch_metadata:W}=w;I.richEmbed.title=u,I.richEmbed.author_name=R,I.richEmbed.request_url=k,I.richEmbed.thumbnail_url=x,I.richEmbed.twitch_metadata=W}async function se(w){const v=await l.awaitMessage(w.msg_id).catch(R=>{$e.debug("failed to find new message for chat highlight",R.message)});if(!v)return;const I=v.author?l.lowTrustUsers[v.author.id]:null;if(I&&I.treatment.type!=="NONE")return;const u=w.highlights.sort((R,k)=>h[k.type]-h[R.type]);for(const R of u)switch(R.type){case"raider":m.value&&v.setHighlight("#6dd126",v.first?"First Time Chat From Raider":"Raider");break;case"returning_chatter":f.value&&v.setHighlight("#3296e6","Returning Chatter");break}}return(w,v)=>null}}),vn=Y({__name:"ChatTray",setup(a){return(s,l)=>(r(!0),d(q,null,we($(At),({parent:g,component:f,props:m},h)=>(r(),d(q,{key:h},[g.current?(r(),te(gt,{key:0,to:g.current},[(r(),te(Ke(f),ft(Gt(m)),null,16))],8,["to"])):V("",!0)],64))),128))}}),bn={id:"seventv-message-container",class:"seventv-message-container"},yn=Y({__name:"ChatController",props:{controller:{},room:{},list:{},buffer:{},events:{},presentation:{},restrictions:{}},setup(a){const s=a,l=Ut("chat"),{sendMessage:g}=rt(),{list:f,controller:m,room:h,presentation:C}=zt(s),L=document.createElement("seventv-container");L.id="seventv-chat-controller";const K=N(),F=N(L),se=N(null),w=N(L.getBoundingClientRect()),v=N(),I=N(""),u=Ce(s.controller.component.props.channelID,!0);u.setCurrentChannel({...u.base,id:u.id});const R=rt(),k=ut(u),x=qe(u),W=ht(u,{scroller:v,bounds:w}),O=Le(u),ue=Ot(u),ve=X("chat.line_limit",150),he=X("chat.ignore_clear_chat"),be=N(null),b=new Map,D=X("chat.font-april-fools",!1);Q(D,c=>{O.fontAprilFools=c===!1?"Comic Sans MS, Comic Sans, cursive":"inherit"},{immediate:!0}),Wt(()=>{if(!f.value||!f.value.domNodes)return;const c=f.value.domNodes.root;c&&(c.classList.add("seventv-chat-list"),F.value=c)});const B=N(null);Q(f,(c,_)=>{if(!(!c||!c.component)){if(_&&_.component&&c!==_){ne(_.component,"props");return}ke(c.component,"props",{value(S){B.value=S.messageHandlerAPI}})}},{immediate:!0});const t=N([]),oe=je(t,1e3);Q(oe,async c=>{if(c.length)for(const _ of t.value)_.id==="FrankerFaceZWasHere"||_.id==="BETTERTTV_EMOTES"||g("SYNC_TWITCH_SET",{input:ct(_)})}),Q(h,(c,_)=>{!c||!c.component||(_&&_.component&&c!==_&&ne(_.component,"props"),ke(h.value.component,"props",{value(S){switch(O.twitchBadgeSets=S.badgeSets,O.primaryColorHex=S.primaryColorHex,I.value=`#${S.primaryColorHex??"755ebc"}`,document.body.style.setProperty("--seventv-channel-accent",I.value),O.useHighContrastColors=S.useHighContrastColors,O.showTimestamps=S.showTimestamps,O.showModerationIcons=S.showModerationIcons,O.pauseReason.clear(),O.pauseReason.add("SCROLL"),S.chatPauseSetting){case"MOUSEOVER_ALTKEY":O.pauseReason.add("ALTKEY"),O.pauseReason.add("MOUSEOVER");break;case"MOUSEOVER":O.pauseReason.add("MOUSEOVER");break;case"ALTKEY":O.pauseReason.add("ALTKEY");break}}}))},{immediate:!0}),ke(m.value.component,"props",{value(c){c.channelID&&(be.value={id:c.channelID,username:c.channelLogin,displayName:c.channelDisplayName,active:!0});const _=new Set;for(const[o,n]of[["VIP",c.isCurrentUserVIP],["EDITOR",c.isCurrentUserEditor],["MODERATOR",c.isCurrentUserModerator||c.channelID===c.userID],["BROADCASTER",c.channelID===c.userID]])n&&_.add(o);u.actor.roles=_,O.isDarkTheme=c.theme,x.sendMessage=c.chatConnectionAPI.sendMessage,We(c.chatConnectionAPI,"sendMessage",function(o,...n){var y,G,z;if(((y=P.value)==null?void 0:y.size)!=0)for(const[T,j]of((G=P.value)==null?void 0:G.entries())??[])R.sendMessage("CHANNEL_ACTIVE_CHATTER",{channel:{id:T,username:j.login,displayName:j.displayName,active:!0}});else R.sendMessage("CHANNEL_ACTIVE_CHATTER",{channel:ct(u.base)});for(const T of((z=l.instance)==null?void 0:z.messageSendMiddleware.values())??[])n[0]=T(n[0]);return o==null?void 0:o.apply(this,n)});const S=c.emoteSetsData;!S||S.loading||(t.value=S.emoteSets)}});const P=N(null);Q(C,(c,_)=>{if(!(!c||!c.component)){if(_&&_.component&&c!==_){ne(_.component,"props");return}ke(c.component,"props",{value(S){P.value=S.sharedChatDataByChannelID;for(const o of P.value.keys())!b.has(o)&&o!=u.id&&b.set(o,Ce(o,!0))}})}},{immediate:!0});const J=Vt({parentSelector:".stream-chat",predicate:c=>c.props&&(c.props.onShowViewerCard||c.openUserCard)});J.then(([c])=>{c&&ue.update("TWITCH","onShowViewerCard",c.props.onShowViewerCard??c.openUserCard)},()=>null),ue.update("TWITCH","onShowViewerWarnPopover",(c,_,S)=>{const o=m.value.component.props;o.setWarnUserTarget({targetUserID:c,targetUserLogin:_}),o.setWarnUserPopoverPlacement(S)}),J instanceof Nt&&dt(Dt(1e4)).toBeTruthy().then(()=>J.disconnect());const i=N(null),Re=je(i,100),Se=N(!0);Q(Se,c=>{var S;const _=(S=i.value)==null?void 0:S.buffer;c||!_||He(_)});function He(c){var S;if(!c.length)return;const _=[];for(const o of c){const n=new De(o.id);if(o.isHistorical||o.type===ee.CONNECTED){n.historical=!0,(S=K.value)==null||S.onChatMessage(n,o,!1),_.push(n);continue}}x.displayed=_.concat(x.displayed),Pe(()=>{W.scrollToLive(0)})}Q(Re,(c,_)=>{_&&c!==_?(ne(_,"blockedUsers"),ne(_,"props")):c&&(ke(c,"props",{value(S){Se.value=S.isLoadingHistoricalMessages}}),ke(c,"blockedUsers",{value(S){O.blockedUsers=S}}))}),Q(be,c=>{!c||!u.setCurrentChannel(c)||(x.clear(),W.unpause(),Pe(k.reset))},{immediate:!0}),Q(()=>s.buffer,c=>{const _=c==null?void 0:c.component;_&&(i.value=_)},{immediate:!0});const Ue=N(null);Q(()=>s.events,c=>{!c||!c.component||(Ue.value=c.component)},{immediate:!0}),Q(Ue,(c,_)=>{_&&ne(_,"onClearChatEvent"),c&&We(c,"onClearChatEvent",S=>{const o=new De().setComponent(Ye,{text:he.value?"Chat clear prevented by 7TV":"Chat cleared by a moderator"});return he.value||x.clear(),x.add(o),S==null?void 0:S.apply(this,[{channel:""}])})},{immediate:!0});const Me=new ResizeObserver(()=>{w.value=F.value.getBoundingClientRect()});return Me.observe(F.value),jt(()=>{x.clear()}),Yt(()=>{Me.disconnect(),L.remove(),se.value&&se.value.classList.remove("seventv-checked"),$e.debug("<ChatController> Unmounted"),ne(m.value.component,"props"),f.value&&(ne(f.value.component.props,"messageHandlerAPI"),ne(f.value.component,"props")),h.value&&ne(h.value.component,"props"),document.body.style.removeProperty("--seventv-channel-accent")}),(c,_)=>(r(),d(q,null,[$(u).id?(r(),te(gt,{key:0,to:F.value},[M(Ne,{ref_key:"scrollerRef",ref:v,class:"seventv-chat-scroller",style:ye({fontFamily:$(O).fontAprilFools}),onContainerScroll:$(W).onScroll,onContainerWheel:$(W).onWheel,onMouseenter:_[1]||(_[1]=S=>$(O).hovering=!0),onMouseleave:_[2]||(_[2]=S=>$(O).hovering=!1)},{default:ie(()=>[e("div",bn,[M(dn,{ref_key:"chatList",ref:K,list:$(f),restrictions:c.restrictions,"shared-chat-data":P.value,"message-handler":B.value},null,8,["list","restrictions","shared-chat-data","message-handler"])]),$(W).paused?(r(),d("div",{key:0,class:"seventv-message-buffer-notice",onClick:_[0]||(_[0]=(...S)=>$(W).unpause&&$(W).unpause(...S))},[M(fn),$(W).pauseBuffer.length?(r(),d("span",{key:0,class:Ve({capped:$(W).pauseBuffer.length>=$(ve)})},p($(W).pauseBuffer.length),3)):V("",!0),e("span",null,p($(W).pauseBuffer.length>0?"new messages":"Chat Paused"),1)])):V("",!0)]),_:1},8,["style","onContainerScroll","onContainerWheel"]),$(u).loaded?(r(),te(Jt,{key:0})):V("",!0)],8,["to"])):V("",!0),M(vn),M(gn)],64))}}),wn=["checked","disabled"],Ie=Y({__name:"FormCheckbox",props:{checked:{type:Boolean},disabled:{type:Boolean}},emits:["update:checked","update:modelValue"],setup(a,{emit:s}){const l=s;function g(f){const m=f.target.checked;l("update:checked",m),l("update:modelValue",m)}return(f,m)=>(r(),d("div",null,[e("input",{id:"checkbox",checked:f.checked,disabled:f.disabled,type:"checkbox",onChange:g},null,40,wn)]))}}),Cn=["type","error","autofocus","value","placeholder"],Sn=Y({__name:"FormInput",props:{label:{},modelValue:{},type:{default:"text"},icon:{},error:{type:Boolean},width:{},appearance:{default:"outline"},autofocus:{type:Boolean}},emits:["update:modelValue","blur"],setup(a,{expose:s,emit:l}){Kt(C=>({cd2da29c:C.width}));const g=a,f=l,m=C=>f("update:modelValue",C.target.value),h=N(null);return s({focus:()=>{var C;return(C=h.value)==null?void 0:C.focus()}}),mt(()=>{h.value&&g.autofocus&&h.value.focus()}),(C,L)=>(r(),d("input",{ref_key:"inputEl",ref:h,type:C.type,autocomplete:"noidontthinkso","data-form-type":"other",error:C.error,autofocus:C.autofocus,value:C.modelValue,placeholder:C.label,onInput:m,onBlur:L[0]||(L[0]=K=>f("blur"))},null,40,Cn))}}),ce=A(Sn,[["__scopeId","data-v-5bc955fa"]]),kn={},$n={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",fill:"currentColor",width:"1em",height:"1em"},Mn=e("path",{d:"M0 256a256 256 0 1 1 512 0A256 256 0 1 1 0 256zm256 32a32 32 0 1 1 0-64 32 32 0 1 1 0 64zm-96-32a96 96 0 1 0 192 0 96 96 0 1 0 -192 0zM96 240c0-35 17.5-71.1 45.2-98.8S205 96 240 96c8.8 0 16-7.2 16-16s-7.2-16-16-16c-45.4 0-89.2 22.3-121.5 54.5S64 194.6 64 240c0 8.8 7.2 16 16 16s16-7.2 16-16z"},null,-1),Tn=[Mn];function In(a,s){return r(),d("svg",$n,Tn)}const ze=A(kn,[["render",In]]),re=a=>(fe("data-v-a026755a"),a=a(),ge(),a),En={class:"seventv-settings-custom-highlights"},Dn=re(()=>e("div",{class:"tabs"},null,-1)),Vn={class:"list"},Rn=re(()=>e("u",null,[e("h5",null,"Phrases & Words")],-1)),Un=re(()=>e("div",{class:"phrase-item item heading"},[e("div",null,"Pattern"),e("div",null,"Label"),e("div",{class:"centered"},"Flash Title"),e("div",{class:"centered"},"RegExp"),e("div",null,"Case Sensitive"),e("div",null,"Color")],-1)),Bn=["onClick"],Nn=["onClick"],Pn={name:"flash-title",class:"centered"},Ln={name:"is-regexp",class:"centered"},xn={name:"case-sensitive",class:"centered"},Hn={name:"color"},An=["onUpdate:modelValue","onInput"],On={class:"sound-options"},Fn=["active","onClick"],Gn=["active","onClick"],zn=["active"],Wn={key:0},jn=["onInput"],Yn={class:"item create-new"},Kn={name:"pattern"},Zn=re(()=>e("hr",{class:"solid"},null,-1)),qn=re(()=>e("u",null,[e("h5",null,"Badges")],-1)),Xn=re(()=>e("div",{class:"badge-item item heading"},[e("div",null,"Badge ID"),e("div",null,"Version"),e("div",null,"Label"),e("div",null,"Badge"),e("div",{class:"centered"},"Flash Title"),e("div",null,"Color")],-1)),Jn=["onClick"],Qn=["onClick"],ei=["onClick"],ti={name:"badgeURL"},si=["onUpdate:modelValue","src"],ai={name:"flash-title",class:"centered"},oi={name:"color"},ni=["onUpdate:modelValue","onInput"],ii={class:"sound-options"},ri=["active","onClick"],li=["active","onClick"],ci=["active"],di={key:0},ui=["onInput"],hi={class:"item create-new"},pi={name:"badge"},mi=re(()=>e("option",{value:"",disabled:"",selected:""},"New Badge Highlight",-1)),_i=re(()=>e("hr",{class:"solid"},null,-1)),fi=re(()=>e("u",null,[e("h5",null,"Usernames")],-1)),gi=re(()=>e("div",{class:"username-item item heading"},[e("div",null,"Username"),e("div",null,"Label"),e("div",{class:"centered"},"Flash Title"),e("div",null,"Color")],-1)),vi=["onClick"],bi=["onClick"],yi={name:"flash-title",class:"centered"},wi={name:"color"},Ci=["onUpdate:modelValue","onInput"],Si={class:"sound-options"},ki=["active","onClick"],$i=["active","onClick"],Mi=["active"],Ti={key:0},Ii=["onInput"],Ei={class:"item create-new"},Di={name:"pattern"},Vi=Y({__name:"SettingsConfigHighlights",setup(a){var be;const s=Ce(),l=pt(s),g=Le(s),f=N(""),m=N(""),h=N(""),C=xe({pattern:new WeakMap,label:new WeakMap,version:new WeakMap}),L=N(),K=N(),F=N(),se=(be=_e(g,"twitchBadgeSets").value)==null?void 0:be.globalsBySet,w=[];se.forEach(b=>{b.forEach(D=>{w.push(D)})});function v(b,D){const B=C[D].get(b);B&&B.focus()}function I(b,D){if(!C[D].get(b))return;const t=is();l.updateId("new-highlight",t),l.save()}function u(b,D){b.flashTitle=D,l.updateFlashTitle(b),l.save()}function R(b,D){b.regexp=D,l.save()}function k(b,D){b.caseSensitive=D,l.save()}function x(b,D){if(!(D.target instanceof HTMLInputElement))return;const B=D.target.value;b.color=B,l.save()}function W(b,D){var oe;if(!(D.target instanceof HTMLInputElement))return;const B=(oe=D.target.files)==null?void 0:oe[0];if(!B)return;const t=new FileReader;t.onload=P=>{if(!(P.target instanceof FileReader))return;const J=P.target.result;if(J instanceof ArrayBuffer){if(J.byteLength>50*1024)return alert("File is too large! (max 50KB)");delete b.soundPath,b.soundFile={name:B.name,type:B.type,data:J},l.updateSoundData(b),l.save()}},D.target.value="",t.readAsArrayBuffer(B)}function O(b){delete b.soundFile,delete b.soundDef,b.soundPath="#ping",l.save()}function ue(b){delete b.soundFile,delete b.soundPath,delete b.soundDef,l.updateSoundData(b),l.save()}function ve(b){l.remove(b.id),l.save()}function he(b,D){Q(b,(B,t)=>{if(!B||t)return;const oe=l.define(h.value?b.value:"new-highlight",{color:"#8803fc",label:h.value?b.value.split(/\s*\|\s*/)[0]:"",badgeURL:h.value?w.find(P=>P.setID===b.value.split(/\s*\|\s*/)[1]&&P.version===b.value.split(/\s*\|\s*/)[2]).image1x:"",version:h.value?b.value.split(/\s*\|\s*/)[2]:"",pattern:h.value?b.value.split(/\s*\|\s*/)[1]:b.value,[D]:!0},!0);Pe(()=>{const P=C.pattern.get(oe);P&&(P.focus(),b.value="")})})}return he(f,"phrase"),he(m,"username"),he(h,"badge"),(b,D)=>{const B=_t("tooltip");return r(),d("main",En,[Dn,e("div",Vn,[Rn,Un,M(Ne,null,{default:ie(()=>[(r(!0),d(q,null,we($(l).getAllPhraseHighlights(),(t,oe,P)=>{var J;return r(),d("div",{key:t.id,class:"phrase-item item"},[e("div",{name:"pattern",class:"use-virtual-input",tabindex:"0",onClick:i=>v(t,"pattern")},[e("span",null,p(t.pattern),1),M(ce,{ref_for:!0,ref:i=>C.pattern.set(t,i),modelValue:t.pattern,"onUpdate:modelValue":i=>t.pattern=i,onBlur:i=>I(t,"pattern")},null,8,["modelValue","onUpdate:modelValue","onBlur"])],8,Bn),e("div",{name:"label",class:"use-virtual-input",tabindex:"0",onClick:i=>v(t,"label")},[e("span",null,p(t.label),1),M(ce,{ref_for:!0,ref:i=>C.label.set(t,i),modelValue:t.label,"onUpdate:modelValue":i=>t.label=i,onBlur:i=>I(t,"label")},null,8,["modelValue","onUpdate:modelValue","onBlur"])],8,Nn),e("div",Pn,[M(Ie,{checked:!!t.flashTitle,"onUpdate:checked":i=>u(t,i)},null,8,["checked","onUpdate:checked"])]),e("div",Ln,[M(Ie,{checked:!!t.regexp,disabled:t.username,"onUpdate:checked":i=>R(t,i)},null,8,["checked","disabled","onUpdate:checked"])]),e("div",xn,[M(Ie,{checked:!!t.caseSensitive,disabled:t.username,"onUpdate:checked":i=>k(t,i)},null,8,["checked","disabled","onUpdate:checked"])]),e("div",Hn,[ae(e("input",{"onUpdate:modelValue":i=>t.color=i,type:"color",onInput:i=>x(t,i)},null,40,An),[[Be,t.color]])]),e("div",{ref_for:!0,ref_key:"interactRefPhrases",ref:L,name:"interact"},[e("button",{ref_for:!0,ref:"soundEffectButton",class:Ve(["sound-button",{"has-sound":!!t.soundFile}]),tabindex:"0"},[ae(M(ze,null,null,512),[[B,"Set Custom Sound"]]),e("div",On,[(J=L.value)!=null&&J[P]?(r(),te(Fe,{key:0,anchor:L.value[P]},{default:ie(()=>[e("button",{active:!t.soundPath&&!t.soundFile,onClick:i=>ue(t)}," No Sound ",8,Fn),e("button",{active:!!t.soundPath&&!t.soundFile,onClick:i=>O(t)}," Default Sound ",8,Gn),e("button",{active:!!t.soundFile},[e("label",null,[U(" Custom Sound"+p(t.soundFile?"":"...")+" ",1),t.soundFile?(r(),d("p",Wn,p(t.soundFile.name),1)):V("",!0),e("input",{type:"file",accept:"audio/midi, audio/mpeg, audio/ogg, audio/wav, audio/webm, audio/vorbis, audio/ogg",onInput:i=>W(t,i)},null,40,jn)])],8,zn)]),_:2},1032,["anchor"])):V("",!0)])],2),ae(M(Ae,{tabindex:"0",onClick:i=>ve(t)},null,8,["onClick"]),[[B,"Remove"]])],512)])}),128))]),_:1}),e("div",Yn,[e("div",Kn,[M(ce,{modelValue:f.value,"onUpdate:modelValue":D[0]||(D[0]=t=>f.value=t),label:"New Phrase Highlight..."},{default:ie(()=>[U(" hi ")]),_:1},8,["modelValue"])])]),Zn,qn,Xn,M(Ne,null,{default:ie(()=>[(r(!0),d(q,null,we($(l).getAllBadgeHighlights(),(t,oe,P)=>{var J;return r(),d("div",{key:t.id,class:"badge-item item"},[e("div",{name:"pattern",class:"use-virtual-input",contenteditable:"false",tabindex:"0",onClick:i=>v(t,"pattern")},[e("span",null,p(t.pattern),1),M(ce,{ref_for:!0,ref:i=>C.pattern.set(t,i),modelValue:t.pattern,"onUpdate:modelValue":i=>t.pattern=i,onBlur:i=>I(t,"pattern")},null,8,["modelValue","onUpdate:modelValue","onBlur"])],8,Jn),e("div",{name:"version",class:"use-virtual-input",tabindex:"0",onClick:i=>v(t,"version")},[e("span",null,p(t.version),1),M(ce,{ref_for:!0,ref:i=>C.version.set(t,i),modelValue:t.version,"onUpdate:modelValue":i=>t.version=i,onBlur:i=>I(t,"version")},null,8,["modelValue","onUpdate:modelValue","onBlur"])],8,Qn),e("div",{name:"label",class:"use-virtual-input",tabindex:"0",onClick:i=>v(t,"label")},[e("span",null,p(t.label),1),M(ce,{ref_for:!0,ref:i=>C.label.set(t,i),modelValue:t.label,"onUpdate:modelValue":i=>t.label=i,onBlur:i=>I(t,"label")},null,8,["modelValue","onUpdate:modelValue","onBlur"])],8,ei),e("div",ti,[ae(e("input",{"onUpdate:modelValue":i=>t.badgeURL=i,type:"image",src:t.badgeURL},null,8,si),[[Be,t.badgeURL]])]),e("div",ai,[M(Ie,{checked:!!t.flashTitle,"onUpdate:checked":i=>u(t,i)},null,8,["checked","onUpdate:checked"])]),e("div",oi,[ae(e("input",{"onUpdate:modelValue":i=>t.color=i,type:"color",onInput:i=>x(t,i)},null,40,ni),[[Be,t.color]])]),e("div",{ref_for:!0,ref_key:"interactRefBadges",ref:F,name:"interact"},[e("button",{ref_for:!0,ref:"soundEffectButton",class:Ve(["sound-button",{"has-sound":!!t.soundFile}]),tabindex:"0"},[ae(M(ze,null,null,512),[[B,"Set Custom Sound"]]),e("div",ii,[(J=F.value)!=null&&J[P]?(r(),te(Fe,{key:0,anchor:F.value[P]},{default:ie(()=>[e("button",{active:!t.soundPath&&!t.soundFile,onClick:i=>ue(t)}," No Sound ",8,ri),e("button",{active:!!t.soundPath&&!t.soundFile,onClick:i=>O(t)}," Default Sound ",8,li),e("button",{active:!!t.soundFile},[e("label",null,[U(" Custom Sound"+p(t.soundFile?"":"...")+" ",1),t.soundFile?(r(),d("p",di,p(t.soundFile.name),1)):V("",!0),e("input",{type:"file",accept:"audio/midi, audio/mpeg, audio/ogg, audio/wav, audio/webm, audio/vorbis, audio/ogg",onInput:i=>W(t,i)},null,40,ui)])],8,ci)]),_:2},1032,["anchor"])):V("",!0)])],2),ae(M(Ae,{tabindex:"0",onClick:i=>ve(t)},null,8,["onClick"]),[[B,"Remove"]])],512)])}),128))]),_:1}),e("div",hi,[e("div",pi,[ae((r(),d("select",{"onUpdate:modelValue":D[1]||(D[1]=t=>h.value=t),autocomplete:"on"},[mi,(r(),d(q,null,we(w,t=>e("option",{key:t.title},p(t.title)+" | "+p(t.setID)+" | "+p(t.version),1)),64))])),[[Zt,h.value],[B,"Badge to highlight"]])])]),_i,fi,gi,M(Ne,null,{default:ie(()=>[(r(!0),d(q,null,we($(l).getAllUsernameHighlights(),(t,oe,P)=>{var J;return r(),d("div",{key:t.id,class:"username-item item"},[e("div",{name:"pattern",class:"use-virtual-input",tabindex:"0",onClick:i=>v(t,"pattern")},[e("span",null,p(t.pattern),1),M(ce,{ref_for:!0,ref:i=>C.pattern.set(t,i),modelValue:t.pattern,"onUpdate:modelValue":i=>t.pattern=i,onBlur:i=>I(t,"pattern")},null,8,["modelValue","onUpdate:modelValue","onBlur"])],8,vi),e("div",{name:"label",class:"use-virtual-input",tabindex:"0",onClick:i=>v(t,"label")},[e("span",null,p(t.label),1),M(ce,{ref_for:!0,ref:i=>C.label.set(t,i),modelValue:t.label,"onUpdate:modelValue":i=>t.label=i,onBlur:i=>I(t,"label")},null,8,["modelValue","onUpdate:modelValue","onBlur"])],8,bi),e("div",yi,[M(Ie,{checked:!!t.flashTitle,"onUpdate:checked":i=>u(t,i)},null,8,["checked","onUpdate:checked"])]),e("div",wi,[ae(e("input",{"onUpdate:modelValue":i=>t.color=i,type:"color",onInput:i=>x(t,i)},null,40,Ci),[[Be,t.color]])]),e("div",{ref_for:!0,ref_key:"interactRefUsernames",ref:K,name:"interact"},[e("button",{ref_for:!0,ref:"soundEffectButton",class:Ve(["sound-button",{"has-sound":!!t.soundFile}]),tabindex:"0"},[ae(M(ze,null,null,512),[[B,"Set Custom Sound"]]),e("div",Si,[(J=K.value)!=null&&J[P]?(r(),te(Fe,{key:0,anchor:K.value[P]},{default:ie(()=>[e("button",{active:!t.soundPath&&!t.soundFile,onClick:i=>ue(t)}," No Sound ",8,ki),e("button",{active:!!t.soundPath&&!t.soundFile,onClick:i=>O(t)}," Default Sound ",8,$i),e("button",{active:!!t.soundFile},[e("label",null,[U(" Custom Sound"+p(t.soundFile?"":"...")+" ",1),t.soundFile?(r(),d("p",Ti,p(t.soundFile.name),1)):V("",!0),e("input",{type:"file",accept:"audio/midi, audio/mpeg, audio/ogg, audio/wav, audio/webm, audio/vorbis, audio/ogg",onInput:i=>W(t,i)},null,40,Ii)])],8,Mi)]),_:2},1032,["anchor"])):V("",!0)])],2),ae(M(Ae,{tabindex:"0",onClick:i=>ve(t)},null,8,["onClick"]),[[B,"Remove"]])],512)])}),128))]),_:1}),e("div",Ei,[e("div",Di,[M(ce,{modelValue:m.value,"onUpdate:modelValue":D[2]||(D[2]=t=>m.value=t),label:"New Username Highlight..."},{default:ie(()=>[U(" hi ")]),_:1},8,["modelValue"])])])])])}}}),Ri=A(Vi,[["__scopeId","data-v-a026755a"]]),Ui={infer:"Infer",12:"12-hour",24:"24-hour"},Bi=Object.entries(Ui).map(([a,s])=>[s,a]),Ni=[E("chat.show_emote_modifiers","TOGGLE",{path:["Chat","Style"],label:"Show Emote Modifiers",hint:"Show text pollution from BTTV and FFZ emote modifiers (!w, ffzHyper, etc.). Modifiers are not supported yet, this setting only affects the display of their text form",defaultValue:!1}),E("chat.mod_slider","TOGGLE",{path:["Chat","Moderation"],label:"Mod Slider",hint:"Enable the mod slider in channels where you are moderator",defaultValue:!0}),E("chat.mod_messages","TOGGLE",{path:["Chat","Moderation"],label:"Moderation Messages",hint:"If enabled, you will see timeouts/bans in the chat even if you are not a moderator",defaultValue:!1}),E("chat.ignore_clear_chat","TOGGLE",{path:["Chat","Moderation"],label:"Ignore Clear Chat",hint:"If enabled, messages will be kept intact when a moderator clears the chat",defaultValue:!0}),E("chat.slash_me_style","DROPDOWN",{path:["Chat","Style"],label:"/me Style",hint:"How the /me type messages should be displayed",options:[["Nothing",0],["Italic",1],["Colored",2],["Italic + Colored",3]],defaultValue:2}),E("chat.message_batch_duration","SLIDER",{path:["Chat","Performance"],label:"Message Batching",hint:"The time to wait between rendering new messages. Higher values may improve performance and readability, at the cost of chat feeling less responsive",options:{min:25,max:1e3,step:25,unit:"ms",named_thresolds:[[0,50,"Instant"],[50,250,"Fast"],[250,500,"Balanced"],[500,999,"Slow"],[1e3,1e3,"PowerPoint Presentation"]]},defaultValue:250}),E("chat.smooth_scroll_duration","SLIDER",{path:["Chat","Performance"],label:"Smooth scroll chat",hint:"Smoothly scroll new messages into view. This may impact performance.",options:{min:0,max:1500,step:100,unit:"ms"},defaultValue:0}),E("chat.line_limit","SLIDER",{path:["Chat","Performance"],label:"Message Buffer Capacity",hint:"Define the maximum amount of messages displayed in chat. Higher values may affect performance",options:{min:50,max:1e3,step:10,unit:"lines",named_thresolds:[[0,750,""],[751,1e3,"Performance Warning!"]]},defaultValue:150}),E("ui.compact_tooltips","TOGGLE",{path:["Appearance","Style"],label:"Compact tooltips",hint:"Make the tooltips compact instead of showing the full emote",defaultValue:!1}),E("chat.padding","DROPDOWN",{path:["Chat","Style"],label:"Padding Style",ffz_key:"chat.lines.padding",ffz_transform(a){return a?1:0},effect(a){document.body.style.setProperty("--seventv-chat-padding",{0:"1rem",1:"2rem"}[a]??null)},hint:"Change the padding style of chat lines",options:[["Full-Width",0],["Native (Twitch-like)",1]],defaultValue:1}),E("chat.font_size","SLIDER",{path:["Chat","Style"],label:"Font Size",ffz_key:"chat.font-size",ffz_transform(a){return typeof a=="number"?a:13},effect(a){typeof a=="number"&&(a!==13?document.body.style.setProperty("--seventv-chat-font-size",`${a}px`):document.body.style.removeProperty("--seventv-chat-font-size"))},hint:"Change the size of text in chat, when set to default the size will be inferred from Twitch appearence settings",options:{min:1,max:30,step:1,unit:"px",named_values:[[13,13,"Default"]]},defaultValue:13}),E("chat.colored_mentions","DROPDOWN",{path:["Chat","Style"],label:"Mention Style",hint:"Control how mentions are displayed in chat",options:[["Default",0],["Colored",1],["Painted",2]],transform(a){return a===!1?0:2},defaultValue:1}),E("chat.deleted_messages","DROPDOWN",{path:["Chat","Style"],label:"Deleted Message Style",hint:"Control how deleted messages are displayed in chat",effect(a){switch(document.body.style.removeProperty("--seventv-chat-deleted-display"),document.body.style.setProperty("--seventv-chat-deleted-opacity","0.5"),document.body.style.setProperty("--seventv-chat-deleted-prefix","â€”"),a){case 0:document.body.style.setProperty("--seventv-chat-deleted-decoration","none"),document.body.style.setProperty("--seventv-chat-deleted-opacity","0"),document.body.style.setProperty("--seventv-chat-deleted-display","none"),document.body.style.setProperty("--seventv-chat-deleted-prefix","");break;case 1:document.body.style.setProperty("--seventv-chat-deleted-decoration","none");break;case 2:document.body.style.setProperty("--seventv-chat-deleted-decoration","line-through");break;case 3:document.body.style.removeProperty("--seventv-chat-deleted-decoration"),document.body.style.removeProperty("--seventv-chat-deleted-opacity");break}},options:[["Hidden",0],["Dimmed",1],["Strikethrough",2],["Keep",3]],defaultValue:1}),E("chat.timestamp_with_seconds","TOGGLE",{path:["Chat","Style"],label:"Timestamp Seconds",hint:"If checked, timestamps in chat will also show seconds",defaultValue:!1}),E("chat.timestamp_format","DROPDOWN",{path:["Chat","Style"],label:"Timestamp Format",defaultValue:"infer",hint:"Infer will get the format from the current locale.",options:Bi}),E("chat.user_card","TOGGLE",{path:["Chat","Tools"],label:"Improve the User Card",hint:"Replace the default user card with a faster, more useful version",defaultValue:!0}),E("chat.copy_icon_toggle","TOGGLE",{path:["Chat","Tools"],label:"Copy Icon",hint:"Show a 'Copy' icon when hovering over a chat message to copy the message",defaultValue:!0}),E("highlights.basic.mention","TOGGLE",{path:["Highlights","Built-In"],label:"Show Mention Highlights",hint:"Whether or not to highlight messages that mention or reply to you in chat",defaultValue:!0}),E("highlights.basic.mention_sound","TOGGLE",{path:["Highlights","Built-In"],label:"Play Sound on Mention",hint:"Play a sound when you are mentioned in chat",disabledIf:()=>!X("highlights.basic.mention").value,defaultValue:!1}),E("highlights.basic.mention_title_flash","TOGGLE",{path:["Highlights","Built-In"],label:"Flash Title on Mention",hint:"When tabbed out, the username of users who mention you will flash in the title",disabledIf:()=>!X("highlights.basic.mention").value,defaultValue:!0}),E("highlights.basic.monitored_low_trust_user","TOGGLE",{path:["Highlights","Built-In"],label:"Show Monitored Suspicious User Highlights (Moderator only)",hint:"Whether or not to highlight users who are a monitored suspicious user",defaultValue:!0}),E("highlights.basic.restricted_low_trust_user","TOGGLE",{path:["Highlights","Built-In"],label:"Show Restricted Suspicious User Highlights (Moderator only)",hint:"Whether or not to highlight users who are a restricted suspicious user",defaultValue:!0}),E("highlights.basic.returning_chatter","TOGGLE",{path:["Highlights","Built-In"],label:"Show Returning Chatters (Moderator only)",hint:"Whether or not to highlight users who have returned",defaultValue:!1}),E("highlights.basic.raider","TOGGLE",{path:["Highlights","Built-In"],label:"Show Raiders (Moderator only)",hint:"Whether or not to highlight users who are part of a raid",defaultValue:!0}),E("highlights.basic.first_time_chatter","TOGGLE",{path:["Highlights","Built-In"],label:"Show First-Time Chatter Highlights",hint:"Whether or not to highlight users who are chatting for the first time",defaultValue:!0}),E("highlights.basic.self","TOGGLE",{path:["Highlights","Built-In"],label:"Show Highlights for Your Own Messages",hint:"Whether or not to highlight messages sent by yourself",defaultValue:!1}),E("highlights.custom","CUSTOM",{path:["Highlights",""],custom:{component:qt(Ri),gridMode:"new-row"},label:"Custom Highlights",hint:"Create custom highlights for specific words, phrases or all messages from specific users",defaultValue:new Map}),E("highlights.sound_volume","SLIDER",{path:["Highlights","Built-In"],label:"Highlight Sound Volume",hint:"Control the volume at which sound plays upon being mentioned",options:{min:0,max:100,step:1,unit:"%"},defaultValue:75}),E("highlights.display_style","DROPDOWN",{path:["Highlights","Style"],label:"Highlighted Message Style",hint:"Choose how or if, to show highlighted messages in chat",options:[["Standard",0],["Minimal (Solid color)",1],["None (No visual)",2]],defaultValue:0}),E("highlights.opacity","SLIDER",{path:["Highlights","Style"],label:"Highlight Opacity",hint:"Change how bright highlights apear in chat",options:{min:0,max:100,step:1},defaultValue:10}),E("chat.hide_bits_balance","TOGGLE",{label:"Hide Bits From Community Points Button",hint:"Hide the bits balance from the community points button under the chatbox",path:["Chat","Style"],defaultValue:!1}),E("chat.hide_shared_chat","TOGGLE",{label:"Hide Shared Chat",hint:"Hides messages from other chats",path:["Chat","Style"],defaultValue:!1})],Pi=Y({__name:"ChatModule",setup(a,{expose:s}){const{dependenciesMet:l,markAsReady:g}=Bt("chat",{name:"Chat",depends_on:[]}),f=xe(new WeakMap),m=me({parentSelector:".chat-room__content",maxDepth:100,predicate:u=>{var R;return((R=u.props)==null?void 0:R.primaryColorHex)!==void 0}}),h=me({parentSelector:".chat-room__content",maxDepth:100,predicate:u=>u.scrollRef},{trackRoot:!0,hooks:{render:function(u){return u.component.props.children.map(k=>k.key?Rt(u,k.key,k):null)}}}),C=me({parentSelector:".chat-shell, .stream-chat",maxDepth:250,predicate:u=>{var R;return u.pushMessage&&((R=u.props)==null?void 0:R.messageHandlerAPI)}},{hooks:{update(u){f.set(u,!!u.component.props.channelID)}}}),L=me({parentSelector:".stream-chat",maxDepth:250,predicate:u=>u.prependHistoricalMessages&&u.buffer&&u.blockedUsers}),K=me({parentSelector:".stream-chat",maxDepth:250,predicate:u=>u.onClearChatEvent}),F=X("chat.hide_bits_balance");me({childSelector:".community-points-summary",predicate:u=>u.shouldShowBitsBalance},{functionHooks:{shouldShowBitsBalance(u){return F.value?!1:u.call(this)}}});const se=me({parentSelector:".stream-chat",predicate:u=>u.props&&u.props.sharedChatDataByChannelID}),w=me({parentSelector:".stream-chat",predicate:u=>u.getRestrictions&&u.onChatEvent}),v=N(!1),I=je(v,200);return Q(()=>[C.instances,C.instances],([u,R])=>v.value=u.length===R.length,{immediate:!0}),g(),s({chatController:C,chatList:h,chatRoom:m,messageSendMiddleware:new Map}),(u,R)=>(r(!0),d(q,null,we($(C).instances,(k,x)=>(r(),d(q,{key:k.identifier},[$(l)&&$(I)&&f.get(k)?(r(),te(yn,{key:0,list:$(h).instances[0]??void 0,controller:$(C).instances[x],room:$(m).instances[0]??void 0,buffer:$(L).instances[0]??void 0,events:$(K).instances[0]??void 0,presentation:$(se).instances[0]??void 0,restrictions:$(w).instances[0]??void 0},null,8,["list","controller","room","buffer","events","presentation","restrictions"])):V("",!0)],64))),128))}}),tr=Object.freeze(Object.defineProperty({__proto__:null,config:Ni,default:Pi},Symbol.toStringTag,{value:"Module"}));export{tr as _};
