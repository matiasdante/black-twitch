import{O as U}from"../src/app/options/options.js";import{U as y}from"./seventv.UiButton.3.1.9.js";import{U as D}from"./seventv.UiScrollable.3.1.9.js";import{e as M,r as v,f as $,i as q,a as F,l as o,m as a,F as N,E as C,q as b,C as g,B as P,D as p,x as n,O as E,I,G as m,Q as R,R as V,_ as j}from"./seventv.index.3.1.9.js";import"./seventv.preload-helper.3.1.9.js";const G=u=>(R("data-v-1c0eaa7d"),u=u(),V(),u),Y={class:"seventv-compat"},z={class:"seventv-compat-heading"},H={key:0,class:"seventv-compat-list"},K=["has-issues","is-disabled"],Q={class:"ext-heading"},W=["src"],X={key:0},J={key:0,class:"ext-compat-concern-list"},Z={key:0,class:"ext-compat-interact"},ee=["onClick"],se={key:1,class:"seventv-compat-permission-request"},te=G(()=>a("span",null,"Check Compatibility",-1)),ne=M({__name:"Compat",props:{internal:{type:Boolean}},emits:["skip"],setup(u,{emit:B}){const S=B,h=v(null),_=v([]),f=$(new Map),d=v(!1),A=q(U,!1),k={WARNING:"#ff5722",CLASHING:"#f44336",DUPLICATE_FUNCTIONALITY:"#ffc107",NOTE:"#2196f3",BAD_PERFORMANCE:"#c9427b"};fetch("https://7tv.io/v3/config/extension").then(e=>e.json()).then(e=>h.value=e);function O(){chrome.permissions.request({permissions:["management"]},e=>{d.value=e})}function T(){chrome.management.getAll(e=>{var s,c;_.value.length=0,f.clear(),_.value=e.filter(t=>t.type==="extension");const i=[];for(const t of _.value){const l=(c=(s=h.value)==null?void 0:s.compatibility)==null?void 0:c.find(r=>r.id.includes(t.id));i.push([t,l??{id:[],issues:[]}])}i.sort(([,t],[,l])=>t.issues.length>l.issues.length?-1:1);for(const[t,l]of i)f.set(t,l)})}function x(e){chrome.management.setEnabled(e.id,!1,()=>{e.enabled=!1})}function w(e){return e.issues.map(i=>`drop-shadow(0 0 0.1rem ${k[i.severity]})`).join(" ")}return A&&chrome&&chrome.permissions&&chrome.permissions.contains({permissions:["management"]},e=>d.value=e),F([d,h],([e])=>{e&&T()},{immediate:!0}),(e,i)=>(n(),o("main",Y,[a("div",z,[d.value?(n(),o("div",H,[(n(!0),o(N,null,C(f,([s,c])=>{var t,l;return n(),o("div",{key:s.id,class:"seventv-compat-extension-item","has-issues":!!c.issues.length,"is-disabled":!s.enabled,style:E({filter:w(c)})},[a("div",Q,[a("img",{src:((l=(t=s.icons)==null?void 0:t.at(-1))==null?void 0:l.url)??""},null,8,W),a("h3",null,[I(m(s.name)+" ",1),s.shortName&&s.name!==s.shortName?(n(),o("span",X,"("+m(s.shortName)+")",1)):p("",!0),a("span",null,m(s.versionName??s.version),1)])]),b(D,null,{default:g(()=>[c.issues.length?(n(),o("div",J,[(n(!0),o(N,null,C(c.issues,(r,L)=>(n(),o("div",{key:L,class:"ext-compat-concern"},[a("h4",{style:E({color:k[r.severity]})},m(r.severity.replace("_"," ")),5),a("p",null,m(r.message),1)]))),128))])):p("",!0)]),_:2},1024),c.issues.length&&s.enabled?(n(),o("div",Z,[a("button",{onClick:r=>x(s)},"DISABLE",8,ee)])):p("",!0)],12,K)}),128))])):(n(),o("div",se,[b(y,{class:"ui-button-important",onClick:O},{default:g(()=>[te]),_:1}),e.internal?(n(),P(y,{key:0,class:"ui-button-hollow",onClick:i[0]||(i[0]=s=>S("skip"))},{default:g(()=>[I(" No thanks ")]),_:1})):p("",!0)]))])]))}}),me=j(ne,[["__scopeId","data-v-1c0eaa7d"]]);export{me as default};
