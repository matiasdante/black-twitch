import{d as T}from"./seventv.useModule.3.1.9.js";import{u as _,y as v,o as u,p as E,d as y}from"./seventv.GearsIcon.3.1.9.js";import{u as b}from"./seventv.ReactHooks.3.1.9.js";import{e as C,r as S,a as d,a9 as x,ag as P,aw as H,x as h,l as g,E as O,F as w,u as k,B as j,D as B}from"./seventv.index.3.1.9.js";import{j as L}from"./seventv.index.3.1.92.js";const N=C({__name:"SidebarCard",props:{instance:{}},setup(p){const s=p,c=_("ui.sidebar_previews"),i=S();v(s.instance.component,"props",{value:n=>{v(n,"tooltipContent",{value:e=>{typeof e=="object"&&(i.value=e)}})}}),d(i,(n,e)=>{n!=e&&(e&&typeof e.type=="function"&&u(e.type.prototype,"render"),n&&typeof n.type=="function"&&(E(n.type.prototype,"render",function(r,...t){const o=(r==null?void 0:r.apply(this,t))??null;return f(this,o)}),l()))},{immediate:!0}),d(c,()=>l());function l(){x(s.instance.component).forceUpdate()}function f(n,e){var t,o,a;if(!c.value)return e;const r=(t=e==null?void 0:e.props)==null?void 0:t.children;return!r||!((o=r.props)!=null&&o.children)||(r.props.style={width:"20rem"},r.props.children.splice(2,0,{[H]:Symbol.for("react.element"),ref:null,key:null,type:"div",props:{className:"seventv-sidebar-tooltip-preview",style:{backgroundImage:m(((a=n.props.channelDisplayName)==null?void 0:a.toLowerCase())??"???")}}})),e}function m(n){let e=`https://static-cdn.jtvnw.net/previews-ttv/live_user_${n}-190x107.jpg`;return e+=`?${Math.floor(Date.now()/3e5)}`,`url("${e}")`}return P(()=>{var n,e;u(s.instance.component,"props"),(n=s.instance.component)!=null&&n.props&&u(s.instance.component.props,"tooltipContent"),typeof((e=i.value)==null?void 0:e.type)=="function"&&u(i.value.type.prototype,"type")}),(n,e)=>null}}),V=[y("ui.sidebar_previews","TOGGLE",{path:["Appearance","Interface"],label:"Sidebar Stream Thumbnails",hint:"Show stream thumbnails when hovering over streams on the sidebar.",defaultValue:!1}),y("ui.sidebar_hover_expand","TOGGLE",{path:["Appearance","Interface"],label:"Sidebar Expand on Hover",hint:"Expand the sidebar when hovering over it.",effect:p=>document.body.classList.toggle("seventv-sidebar-hover",p),defaultValue:!1})],A=C({__name:"SidebarPreviewsModule",setup(p){const{markAsReady:s}=T("sidebar-previews",{name:"Sidebar Previews",depends_on:["settings"]}),c=_("ui.sidebar_previews"),i=b({parentSelector:".side-nav-section",predicate:t=>t.props&&t.props.title&&t.props.isWatchParty!==null&&t.props.linkTo}),l=b({childSelector:".side-nav",predicate:t=>t.collapseOnBreakpoint},{trackRoot:!0}),f=b({parentSelector:".side-nav",predicate:t=>t.handleToggleVisibility}),m=_("ui.sidebar_hover_expand");function n(t){var a;if(!m.value)return;const o=(a=f.instances.at(0))==null?void 0:a.component;o&&t===o.props.collapsed&&o.handleToggleVisibility()}const e=S(),r=L(e);return d(r,n,{immediate:!0}),d(()=>{var t;return(t=l.instances.at(0))==null?void 0:t.domNodes.root},t=>e.value=t,{immediate:!0}),s(),(t,o)=>(h(!0),g(w,null,O(k(i).instances,a=>(h(),g(w,{key:a.identifier},[k(c)?(h(),j(N,{key:0,instance:a},null,8,["instance"])):B("",!0)],64))),128))}}),D=Object.freeze(Object.defineProperty({__proto__:null,config:V,default:A},Symbol.toStringTag,{value:"Module"}));export{D as _};
