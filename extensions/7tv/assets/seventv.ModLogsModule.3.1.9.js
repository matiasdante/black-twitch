import{D as ee,u as O,E as se,d as U,j as te}from"./seventv.GearsIcon.3.1.9.js";import{d as oe,g as X}from"./seventv.useModule.3.1.9.js";import{u as R,a as F}from"./seventv.useChatEmotes.3.1.9.js";import{u as P}from"./seventv.UiConfirmPrompt.3.1.9.js";import{_ as k,x as o,l as r,m as c,f as W,e as L,F as y,E as T,B as D,u as v,r as x,D as I,G as Y,h as ne,W as S,q as $,H as z,C as j,Q as q,R as G,aq as ae,P as ce}from"./seventv.index.3.1.9.js";import{U as Q,r as re,o as ie,g as A,j as H,p as le,l as de,W as ue}from"./seventv.UserTag.3.1.9.js";import{T as me,U as _e}from"./seventv.UiDraggable.3.1.9.js";import{c as fe,b as he,a as ve}from"./seventv.index.3.1.95.js";import{U as ge}from"./seventv.UiScrollable.3.1.9.js";const pe={},Me={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",fill:"currentColor",width:"1em",height:"1em"},be=c("path",{d:"M367.2 412.5L99.5 144.8C77.1 176.1 64 214.5 64 256c0 106 86 192 192 192c41.5 0 79.9-13.1 111.2-35.5zm45.3-45.3C434.9 335.9 448 297.5 448 256c0-106-86-192-192-192c-41.5 0-79.9 13.1-111.2 35.5L412.5 367.2zM512 256c0 141.4-114.6 256-256 256S0 397.4 0 256S114.6 0 256 0S512 114.6 512 256z"},null,-1),we=[be];function ke(s,n){return o(),r("svg",Me,we)}const Ce=k(pe,[["render",ke]]),ye={},De={width:"100%",height:"100%",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 640 512",fill:"currentColor"},$e=c("path",{d:"M344 56L320 80c37.3 37.3 74.7 74.7 112 112c8-8 16-16 24-24l24.7 24.7c-75.6 6.5-137.5 60.8-155.4 132.6c-4.4-4.4-8.8-8.8-13.2-13.2c8-8 16-16 24-24c-37.3-37.3-74.7-74.7-112-112l-24 24c-18.7-18.7-37.3-37.3-56-56C192 96 240 48 288 0c18.7 18.7 37.3 37.3 56 56zM214.6 342.7c5.8 5.7 11.6 11.5 17.4 17.3C181.3 410.7 130.7 461.3 80 512c-26.7-26.7-53.3-53.3-80-80c50.7-50.7 101.3-101.3 152-152c5.8 5.8 11.6 11.6 17.4 17.4c21.8-21.8 43.5-43.6 65.3-65.4c15.1 15.1 30.2 30.2 45.3 45.3c-21.8 21.8-43.6 43.6-65.4 65.4zM352 368c0-79.5 64.5-144 144-144s144 64.5 144 144s-64.5 144-144 144s-144-64.5-144-144zm160-80l-32 0c0 32 0 64 0 96c26.7 0 53.3 0 80 0c0-10.7 0-21.3 0-32c-16 0-32 0-48 0c0-21.3 0-42.7 0-64z"},null,-1),Ie=[$e];function Le(s,n){return o(),r("svg",De,Ie)}const J=k(ye,[["render",Le]]),Se={},xe={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",fill:"currentColor",width:"1em",height:"1em"},Te=c("path",{d:"M400 16L166.6 249.4l96 96L496 112 512 0 400 16zM0 416l96 96 32-32-16-32 56-56 88 56 32-32L96 224 64 256l56 88L64 400 32 384 0 416z"},null,-1),Ae=[Te];function Ee(s,n){return o(),r("svg",xe,Ae)}const Ne=k(Se,[["render",Ee]]),ze={},Be={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",fill:"currentColor",width:"1em",height:"1em"},Oe=c("path",{d:"M256 0H224V32 96v32h64V96 66.7C378.8 81.9 448 160.9 448 256c0 106-86 192-192 192S64 362 64 256c0-53.7 22-102.3 57.6-137.1l22.9-22.4L99.7 50.7 76.8 73.1C29.5 119.6 0 184.4 0 256C0 397.4 114.6 512 256 512s256-114.6 256-256S397.4 0 256 0zM193 159l-17-17L142.1 176l17 17 80 80 17 17L289.9 256l-17-17-80-80z"},null,-1),Re=[Oe];function Ue(s,n){return o(),r("svg",Be,Re)}const Xe=k(ze,[["render",Ue]]),He=W({modMessages:[]});function K(){return He}const Ve={class:"seventv-mod-log-authority-messages"},Fe=L({__name:"ModLogsAuthorityMessages",setup(s){const n=K(),t=R(),d=F(t);return(l,f)=>(o(),r("main",Ve,[(o(!0),r(y,null,T(v(n).modMessages,e=>(o(),D(Q,{key:e.id,msg:e,"force-timestamp":!0,emotes:v(d).active},null,8,["msg","emotes"]))),128))]))}}),Pe=k(Fe,[["__scopeId","data-v-0fb8fc84"]]);function Z(s,n){if(s==null)throw new TypeError("assign requires that input parameter not be null or undefined");for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(s[t]=n[t]);return s}function We(s){return Z({},s)}var V=1440,Ye=2520,B=43200,je=86400;function qe(s,n,t){var d,l;re(2,arguments);var f=le(),e=(d=(l=t==null?void 0:t.locale)!==null&&l!==void 0?l:f.locale)!==null&&d!==void 0?d:ie;if(!e.formatDistance)throw new RangeError("locale must contain formatDistance property");var m=fe(s,n);if(isNaN(m))throw new RangeError("Invalid time value");var a=Z(We(t),{addSuffix:!!(t!=null&&t.addSuffix),comparison:m}),g,p;m>0?(g=A(n),p=A(s)):(g=A(s),p=A(n));var u=he(p,g),M=(H(p)-H(g))/1e3,i=Math.round((u-M)/60),_;if(i<2)return t!=null&&t.includeSeconds?u<5?e.formatDistance("lessThanXSeconds",5,a):u<10?e.formatDistance("lessThanXSeconds",10,a):u<20?e.formatDistance("lessThanXSeconds",20,a):u<40?e.formatDistance("halfAMinute",0,a):u<60?e.formatDistance("lessThanXMinutes",1,a):e.formatDistance("xMinutes",1,a):i===0?e.formatDistance("lessThanXMinutes",1,a):e.formatDistance("xMinutes",i,a);if(i<45)return e.formatDistance("xMinutes",i,a);if(i<90)return e.formatDistance("aboutXHours",1,a);if(i<V){var C=Math.round(i/60);return e.formatDistance("aboutXHours",C,a)}else{if(i<Ye)return e.formatDistance("xDays",1,a);if(i<B){var b=Math.round(i/V);return e.formatDistance("xDays",b,a)}else if(i<je)return _=Math.round(i/B),e.formatDistance("aboutXMonths",_,a)}if(_=ve(p,g),_<12){var h=Math.round(i/B);return e.formatDistance("xMonths",h,a)}else{var w=_%12,N=Math.floor(_/12);return w<3?e.formatDistance("aboutXYears",N,a):w<9?e.formatDistance("overXYears",N,a):e.formatDistance("almostXYears",N+1,a)}}const Ge=["data-seventv-mod-action"],Qe={class:"mod-action-timestamp"},Je={key:0,class:"mod-action-message-list"},Ke={key:1,class:"no-messages-recorded"},Ze=L({__name:"ModLogsRecentActionsItem",props:{messages:{},victim:{},mod:{},emotes:{}},setup(s){const n=s,t=x("");ee(()=>{t.value=qe(new Date(n.mod.timestamp),new Date,{addSuffix:!0,includeSeconds:!0})},5e3,{immediateCallback:!0});function d(){return n.mod.actionType+(n.mod.banDuration?" "+n.mod.banDuration+"s":"")}return(l,f)=>(o(),r("div",{class:"mod-action","data-seventv-mod-action":d()},[c("span",null,[l.victim?(o(),D(de,{key:0,user:l.victim},null,8,["user"])):I("",!0),c("span",Qe,Y(t.value),1)]),l.messages.length?(o(),r("div",Je,[(o(!0),r(y,null,T(l.messages,e=>(o(),D(Q,{key:e.id,msg:e,emotes:l.emotes,"hide-author":!0,"hide-deletion-state":!0,"hide-moderation":!0},null,8,["msg","emotes"]))),128))])):(o(),r("p",Ke,"(No Messages Recorded)"))],8,Ge))}}),es=k(Ze,[["__scopeId","data-v-3a2aecb4"]]),ss={class:"seventv-mod-log-recent-actions"},ts=L({__name:"ModLogsRecentActions",setup(s){const n=R(),t=P(n),d=F(n);return(l,f)=>(o(),r("main",ss,[(o(!0),r(y,null,T(v(t).moderated,e=>(o(),r(y,{key:e.id},[e.mod?(o(),D(es,{key:0,messages:e.messages,victim:e.victim,mod:e.mod,emotes:v(d).active},null,8,["messages","victim","mod","emotes"])):I("",!0)],64))),128))]))}}),os=k(ts,[["__scopeId","data-v-98a53b9a"]]),E=s=>(q("data-v-00a2b2c1"),s=s(),G(),s),ns={class:"seventv-mod-logs-container"},as=E(()=>c("h3",{style:{"font-size":"1.5rem"}},"Mod Logs",-1)),cs={class:"seventv-mod-logs-content"},rs={class:"seventv-mod-logs-sidebar"},is=["selected","unavailable","onClick"],ls={class:"seventv-mod-logs-body"},ds={key:0,class:"seventv-mod-logs-risks"},us={class:"seventv-mod-logs-risks-heads-up"},ms=E(()=>c("span",null,"HEADS UP!",-1)),_s=E(()=>c("span",null," The content displayed by this tool is unfiltered and contains potentially harmful or offensive material that has been blocked by the channel moderators. Are you sure you want to proceed? ",-1)),fs={class:"seventv-mod-logs-risks-choice"},hs=E(()=>c("label",null,"(You can re-enable this feature via the settings later)",-1)),vs=L({__name:"ModLogs",props:{channelId:{}},emits:["close"],setup(s,{expose:n,emit:t}){const d=s,l=t,f=R(d.channelId),e=P(f),m=K(),a=x(),g=O("chat.mod_logs.enabled"),p=O("chat.mod_logs.ack_risks"),u=x("recent-actions"),M=ne(()=>i[u.value]??null),i=W({"recent-actions":{id:"recent-actions",name:"Recent Timeouts/Bans",icon:S(Ce),com:S(os)},"active-actions":{id:"active-actions",name:"Active Timeouts/Bans",icon:S(Xe),com:void 0},"moderator-messages":{id:"moderator-messages",name:"Moderator Messages",icon:S(Ne),com:S(Pe)}});function _(C){p.value=C,g.value=C,C||l("close")}return se(e.displayed,(C,b,h)=>{for(const w of h)("moderator"in w.badges||"broadcaster"in w.badges||"staff"in w.badges)&&m.modMessages.unshift(w);m.modMessages.length>200&&(m.modMessages.length=150)}),n({handle:a}),(C,b)=>(o(),r("main",ns,[c("div",{ref_key:"handle",ref:a,class:"seventv-mod-logs-header"},[$(J),as,c("button",{onClick:b[0]||(b[0]=h=>l("close"))},[$(me)])],512),c("div",cs,[c("div",rs,[(o(!0),r(y,null,T(i,(h,w)=>(o(),r(y,{key:w},[h.com?(o(),r("div",{key:0,class:"seventv-mod-logs-sidebar-button",selected:h.id===u.value,unavailable:!v(p),onClick:()=>u.value=h.id},[(o(),D(z(h.icon)))],8,is)):I("",!0)],64))),128))]),$(ge,null,{default:j(()=>[c("div",ls,[v(p)?M.value?(o(),r(y,{key:1},[c("p",null,[(o(),D(z(M.value.icon))),c("span",null,Y(M.value.name),1)]),(o(),D(z(M.value.com)))],64)):I("",!0):(o(),r("div",ds,[c("p",us,[$(ue),ms]),_s,c("div",fs,[c("button",{class:"decide-ack",onClick:b[1]||(b[1]=h=>_(!0))}," Acknowledge and Proceed "),c("button",{class:"decide-close",onClick:b[2]||(b[2]=h=>_(!1))},"Close"),hs])]))])]),_:1})])]))}}),gs=k(vs,[["__scopeId","data-v-00a2b2c1"]]),ps=s=>(q("data-v-32c0d32c"),s=s(),G(),s),Ms=ps(()=>c("span",{class:"tooltip-over"},"Mod Logs",-1)),bs=L({__name:"ModLogsButton",props:{onClick:{type:Function}},setup(s){const n=O("chat.mod_logs.enabled");return(t,d)=>v(n)?(o(),r("div",{key:0,class:"seventv-tw-button seventv-mod-logs-button",onClick:d[0]||(d[0]=(...l)=>t.onClick&&t.onClick(...l))},[c("button",null,[$(J,{class:"icon"})]),Ms])):I("",!0)}}),ws=k(bs,[["__scopeId","data-v-32c0d32c"]]),ks=[U("chat.mod_logs.enabled","TOGGLE",{path:["Chat","Moderation"],label:"Enable Mod Logs",hint:"Mod Logs allow you to view recent and active timeouts/bans in the current channel",defaultValue:!0}),U("chat.mod_logs.ack_risks","NONE",{label:"",defaultValue:!1})],Cs=L({__name:"ModLogsModule",async setup(s){let n,t;const{dependenciesMet:d,markAsReady:l}=oe("mod-logs",{name:"Mod Logs",depends_on:["chat","chat-input-controller"]}),f=x(!1),e=x();[n,t]=ae(()=>te(d).toBe(!0)),await n,t();const m=X("chat-input-controller");if(!(m!=null&&m.instance))throw new Error("ChatInputController not found");const a=X("chat");if(!(a!=null&&a.instance))throw new Error("ChatController not found");const g=m.instance.addButton("mod-logs",ws,{onClick:()=>{f.value=!f.value}},2);return l(),(p,u)=>{var M;return f.value&&v(g).current?(o(!0),r(y,{key:0},T(((M=v(a).instance)==null?void 0:M.chatController.instances)??[],i=>{var _;return o(),D(_e,{key:i.component.props.channelID,handle:(_=e.value)==null?void 0:_.handle,"initial-anchor":v(g).current,"initial-middleware":[v(ce)({padding:{bottom:96,right:8},crossAxis:!0})]},{default:j(()=>[$(gs,{ref_for:!0,ref_key:"com",ref:e,"channel-id":i.component.props.channelID,onClose:u[0]||(u[0]=C=>f.value=!1)},null,8,["channel-id"])]),_:2},1032,["handle","initial-anchor","initial-middleware"])}),128)):I("",!0)}}}),Es=Object.freeze(Object.defineProperty({__proto__:null,config:ks,default:Cs},Symbol.toStringTag,{value:"Module"}));export{Es as _};
